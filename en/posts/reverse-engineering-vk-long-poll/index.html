<!DOCTYPE html>
<html lang="en"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries | 0x69.ru</title>

    
<meta name="google-site-verification" content="SX8wwAcRfmBYPxrIA69UFfuq8DDa2GxWVBzVj9tucMA" />
<link rel="canonical" href="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/" />



<meta name="author" content="Rianvy" />
<meta name="description" content="A deep dive into how VK&rsquo;s Long Poll works, building a sniffer to intercept events, and discovering undocumented event codes.
" />


<meta name="keywords" content="VK Long Poll,VK event interception,VKontakte reverse engineering,VK API events,VK browser extension">



<meta name="generator" content="Hugo 0.143.0">


<meta property="og:url" content="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/">
  <meta property="og:site_name" content="0x69.ru">
  <meta property="og:title" content="Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries">
  <meta property="og:description" content="Deep dive into how VK&#39;s Long Poll works, building a sniffer to intercept events, and discovering undocumented event codes. Bonus: the online status mystery and WebSocket.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2026-02-04T13:52:09+03:00">
    <meta property="article:modified_time" content="2026-02-04T13:52:09+03:00">
    <meta property="article:tag" content="Javascript">
    <meta property="article:tag" content="VK-Api">
    <meta property="article:tag" content="Long-Poll">
    <meta property="article:tag" content="Websocket">
    <meta property="article:tag" content="Reverse-Engineering">
    <meta property="article:tag" content="Browser-Extension">
    <meta property="og:image" content="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/Cover.png">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/Cover.png">
  <meta name="twitter:title" content="Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries">
  <meta name="twitter:description" content="Deep dive into how VK&#39;s Long Poll works, building a sniffer to intercept events, and discovering undocumented event codes. Bonus: the online status mystery and WebSocket.">




  

<link rel="stylesheet" href="/css/output.min.css" />




    


<link rel="stylesheet" href="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/a11y-dark.min.css" data-syntax-highlight="true" id="syntax-theme">








<style>
   
  pre { border-radius: 0.5rem;  }
  
   
  
  
   
  .reading-progress { position: fixed; top: 0; left: 0; height: 3px; background: oklch(var(--p)); z-index: 9999; transition: width 0.1s ease-out; }
  .reading-progress-text { position: fixed; top: 0.75rem; right: 1rem; z-index: 9999; font-size: 0.75rem; font-weight: 600; color: oklch(var(--p)); background: oklch(var(--b1) / 0.9); backdrop-filter: blur(8px); padding: 0.25rem 0.75rem; border-radius: 1rem; opacity: 0; transition: opacity 0.3s ease; }
  .reading-progress-text.visible { opacity: 1; }
  
   
  pre { position: relative; }
  .copy-code-btn { position: absolute; top: 0.5rem; right: 0.5rem; padding: 0.25rem 0.5rem; font-size: 0.75rem; background: oklch(var(--b3)); border-radius: 0.25rem; cursor: pointer; opacity: 0; transition: opacity 0.2s, background 0.2s; }
  pre:hover .copy-code-btn { opacity: 1; }
  .copy-code-btn:hover { background: oklch(var(--p)); color: oklch(var(--pc)); }
  .copy-code-btn.copied { background: oklch(var(--su)); color: oklch(var(--suc)); }
  
   
  html { scroll-behavior: smooth; scroll-padding-top: 5rem; }
  
   
  #TableOfContents { 
    max-height: calc(100vh - 12rem); 
    overflow-y: auto;
    padding-right: 0.5rem;
  }
  #TableOfContents::-webkit-scrollbar { width: 6px; }
  #TableOfContents::-webkit-scrollbar-track { background: transparent; }
  #TableOfContents::-webkit-scrollbar-thumb { background: oklch(var(--b3)); border-radius: 3px; }
  #TableOfContents::-webkit-scrollbar-thumb:hover { background: oklch(var(--bc) / 0.3); }
  #TableOfContents a.active { color: oklch(var(--p)); font-weight: 600; }
  #TableOfContents ul { border-left: 2px solid oklch(var(--b3)); }
  
   
  #dream-single-post-content img { transition: transform 0.3s ease, box-shadow 0.3s ease; }
  #dream-single-post-content img:hover { transform: scale(1.02); box-shadow: 0 10px 40px rgba(0,0,0,0.15); }
  
   
  #dream-single-post-content a:not(.badge):not(.btn):not(.lg-item) { 
    text-decoration: none; 
    background-image: linear-gradient(oklch(var(--p)), oklch(var(--p)));
    background-size: 0% 2px;
    background-position: 0 100%;
    background-repeat: no-repeat;
    transition: background-size 0.3s ease;
  }
  #dream-single-post-content a:not(.badge):not(.btn):not(.lg-item):hover { background-size: 100% 2px; }
  
   
  body.focus-mode aside.right-sidebar { 
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.3s ease; 
  }
  body.focus-mode article { 
    max-width: 65ch; 
    margin: 0 auto; 
  }
  
   
  aside.left-sidebar {
    transition: opacity 0.3s ease;
  }
  
   
  body.focus-mode #focus-mode-btn {
    background: oklch(var(--p) / 0.2);
    color: oklch(var(--p));
  }
  
   
  .lg-sub-html { backdrop-filter: blur(16px); }
</style>







    
    <link rel="stylesheet" href="/css/custom.css" />
    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav x-data="{ isSticky: false, mobileMenuOpen: false }"
     x-init="
       window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 });
       $watch('mobileMenuOpen', value => document.body.classList.toggle('overflow-hidden', value));
     "
     class="sticky top-0 z-30 mt-4 lg:mt-8 py-4 transition-all duration-300 transform-gpu will-change-transform"
     :class="{ 'bg-base-100/80 backdrop-blur-xl backdrop-saturate-150 shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] dark:shadow-[0_2px_8px_-2px_rgba(0,0,0,0.3)]': isSticky }">


  
  <div class="container flex items-center justify-between px-4">
  
  
    
    
    
    <section class="flex items-center gap-3">
      <button class="avatar cursor-pointer transition-all duration-200 group" 
              @click="flip = !flip" 
              title="Flip it!"
              aria-label="Flip it!">
        <div class="w-10 h-10 rounded-full ring-2 ring-transparent group-hover:ring-primary/40 transition-all duration-200">
          <img src="/img/avatar.jpg" 
               alt="0x69.ru &lt;/&gt;" 
               class="rounded-full" 
               loading="eager" />
        </div>
      </button>

      
      <div class="flex flex-col">
        
        <a href="/en/" 
           class="text-lg font-semibold hover:text-primary transition-colors duration-200 focus:outline-none focus-visible:text-primary">
          0x69.ru &lt;/&gt;
        </a>
        
        
        <span class="text-sm text-base-content/60 hidden sm:block">To iterate is human, to recurse divine</span>
        
      </div>
      
    </section>

    
    
    
    <div class="sm:hidden">
      
      <button @click="mobileMenuOpen = !mobileMenuOpen" 
              class="inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-content hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95"
              :class="{ 'bg-primary text-primary-content shadow-md': mobileMenuOpen }"
              aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é"
              :aria-expanded="mobileMenuOpen">
        <ion-icon :name="mobileMenuOpen ? 'close' : 'menu'" class="text-xl transition-colors duration-200"></ion-icon>
      </button>
      
      
      <div x-show="mobileMenuOpen"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="opacity-0"
           x-transition:enter-end="opacity-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="opacity-100"
           x-transition:leave-end="opacity-0"
           @click="mobileMenuOpen = false"
           class="fixed inset-0 z-40 bg-base-100/80 backdrop-blur-sm"
           aria-hidden="true">
      </div>
      
      
      <div x-show="mobileMenuOpen"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="opacity-0 -translate-y-4 scale-95"
           x-transition:enter-end="opacity-100 translate-y-0 scale-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="opacity-100 translate-y-0 scale-100"
           x-transition:leave-end="opacity-0 -translate-y-4 scale-95"
           @click.outside="mobileMenuOpen = false"
           @keydown.escape.window="mobileMenuOpen = false"
           class="fixed right-4 top-20 z-50 w-72 max-w-[calc(100vw-2rem)] max-h-[calc(100vh-7rem)] flex flex-col bg-base-100 rounded-xl shadow-xl border border-base-200 dark:border-base-content/10 overflow-hidden">
        
        
        <div class="flex items-center justify-between px-4 py-3 border-b border-base-200 dark:border-base-content/10 flex-shrink-0">
          <span class="font-semibold text-base-content">Menu</span>
          <button @click="mobileMenuOpen = false" 
                  class="inline-flex items-center justify-center w-8 h-8 rounded-lg cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-95"
                  aria-label="–ó–∞–∫—Ä—ã—Ç—å">
            <ion-icon name="close" class="text-lg"></ion-icon>
          </button>
        </div>
        
        
        
          
          
          <div class="p-3 border-b border-base-200 dark:border-base-content/10 flex-shrink-0">
            <button type="button"
                    class="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
                    @click="flip = !flip; mobileMenuOpen = false"
                    title="About"
                    aria-label="About">
              <ion-icon name="information-circle-outline" class="text-lg flex-shrink-0 text-primary"></ion-icon>
              <span class="flex-1 text-left">About</span>
              <ion-icon name="chevron-forward-outline" class="text-base-content/40"></ion-icon>
            </button>
          </div>
          
        
        
        
        <div class="p-3 overflow-y-auto flex-1 overscroll-contain">
          


  


<nav class="space-y-4" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">

  
  <div class="space-y-2">
    <h3 class="px-3 text-xs font-semibold uppercase tracking-wider text-base-content/50">
      Languages
    </h3>
    <ul class="space-y-1">
      
        
        
        
        
        
        
        
        
          
          
        
        
        <li>
          <a href="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/" 
             title="English"
             hreflang="en"
             class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                    transition-all duration-200
                    
                      bg-primary/10 text-primary font-medium
                    "
             aria-current="true">
            <ion-icon name="language" class="text-lg"></ion-icon>
            <span class="flex-1">English</span>
            
            <ion-icon name="checkmark-circle" class="text-primary"></ion-icon>
            
          </a>
        </li>
      
        
        
        
        
        
        
        
        
          
        
        
        <li>
          <a href="https://0x69.ru/ru/posts/reverse-engineering-vk-long-poll/" 
             title="–†—É—Å—Å–∫–∏–π"
             hreflang="ru"
             class="flex items-center gap-3 px-3 py-2.5 rounded-lg
                    transition-all duration-200
                    
                      hover:bg-base-200
                    "
             >
            <ion-icon name="language" class="text-lg"></ion-icon>
            <span class="flex-1">–†—É—Å—Å–∫–∏–π</span>
            
          </a>
        </li>
      
    </ul>
  </div>

  
  <div class="border-t border-base-200 dark:border-base-content/10"></div>

  
  <div class="space-y-2">
    <h3 class="px-3 text-xs font-semibold uppercase tracking-wider text-base-content/50">
      Menu
    </h3>
    <ul class="space-y-1">
      
        





<li role="none">
  <a href="/en/search" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="Search">
    <ion-icon name="search-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">Search</span>
    <kbd class="kbd kbd-xs text-base-content/40">‚åòK</kbd>
  </a>
</li>





      
        




<li role="none">
  <a href="/en/categories" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="All Categories">
    <ion-icon name="folder-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">All Categories</span>
    
    <span class="badge badge-sm badge-ghost font-normal">5</span>
    
  </a>
</li>





      
        




<li role="none">
  <a href="/en/portfolio" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="Portfolio">
    <ion-icon name="briefcase-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">Portfolio</span>
    
    <span class="badge badge-sm badge-ghost font-normal">5</span>
    
  </a>
</li>





      
        




<li role="none">
  <a href="/en/posts" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="Archives">
    <ion-icon name="library-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">Archives</span>
    
    <span class="badge badge-sm badge-ghost font-normal">9</span>
    
  </a>
</li>





      
        




<li role="none">
  <a href="/en/tags" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="All Tags">
    <ion-icon name="pricetags-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">All Tags</span>
    
    <span class="badge badge-sm badge-ghost font-normal">65</span>
    
  </a>
</li>





      
        




<li role="none">
    <a href="https://github.com/rianvy" 
       role="menuitem"
       class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
       target="_blank"
       rel="noopener noreferrer"
       title="GitHub">
      
      <ion-icon name="logo-github" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
      
      <span class="flex-1">GitHub</span>
      
      <ion-icon name="open-outline" class="text-xs text-base-content/40 flex-shrink-0"></ion-icon>
      
    </a>
  </li>
  

      
        





<li role="none">
  <a href="/en/index.xml" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="RSS"
     target="_blank"
     rel="noopener noreferrer">
    <ion-icon name="logo-rss" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">RSS</span>
    <ion-icon name="open-outline" class="text-xs text-base-content/40 flex-shrink-0"></ion-icon>
  </a>
</li>





      
      
      
        










      
    </ul>
  </div>

</nav>
        </div>
      </div>
    </div>

    
    
    
    <section class="hidden sm:flex sm:items-center sm:gap-1 md:gap-2">
      
      
      
        
        
        <button class="px-3 py-2 text-sm font-medium rounded-lg cursor-pointer transition-all duration-200 hover:bg-base-200 hover:text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95"
                @click="flip = !flip"
                title="About">About</button>
        
      

      
      
        
      

      
        
        
        
        
        
          







<a href="/en/search" 
   class="group inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95"
   title="Search"
   aria-label="Search">
  <ion-icon name="search-outline" class="text-xl transition-colors duration-200 group-hover:text-primary-content"></ion-icon>
</a>





        
          







<a href="/en/categories" 
   class="group inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95"
   title="All Categories"
   aria-label="All Categories">
  <ion-icon name="folder-outline" class="text-xl transition-colors duration-200 group-hover:text-primary-content"></ion-icon>
</a>





        
          







<a href="/en/portfolio" 
   class="group inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95"
   title="Portfolio"
   aria-label="Portfolio">
  <ion-icon name="briefcase-outline" class="text-xl transition-colors duration-200 group-hover:text-primary-content"></ion-icon>
</a>





        
      
        
        
        
        <div class="dropdown dropdown-end dropdown-hover">
          <button tabindex="0" 
                  class="inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-content hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95" 
                  aria-label="–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫"
                  aria-haspopup="true">
            <ion-icon name="language-outline" class="text-xl transition-colors duration-200"></ion-icon>
          </button>
          <ul tabindex="0" 
              class="dropdown-content z-[1] min-w-[180px] p-2 mt-2 bg-base-100 rounded-xl shadow-xl border border-base-200 dark:border-base-content/10 overflow-hidden"
              role="menu">
            
              
              
              
              

              
              
                
                
              

              <li role="none">
                <a href="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/" 
                   hreflang="en"
                   role="menuitem"
                   class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 bg-primary/10 text-primary font-semibold"
                   aria-current="true">
                  <ion-icon name="language" class="text-lg flex-shrink-0"></ion-icon>
                  <span class="flex-1">English</span>
                  
                  <ion-icon name="checkmark-circle" class="text-primary text-base"></ion-icon>
                  
                </a>
              </li>
            
              
              
              
              

              
              
                
              

              <li role="none">
                <a href="https://0x69.ru/ru/posts/reverse-engineering-vk-long-poll/" 
                   hreflang="ru"
                   role="menuitem"
                   class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 "
                   >
                  <ion-icon name="language" class="text-lg flex-shrink-0"></ion-icon>
                  <span class="flex-1">–†—É—Å—Å–∫–∏–π</span>
                  
                </a>
              </li>
            
          </ul>
        </div>
          
        
        
        
        <div class="dropdown dropdown-end dropdown-hover">
          <button tabindex="0" 
                  class="inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:text-primary-content hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95" 
                  aria-label="–ï—â—ë"
                  aria-haspopup="true">
            <ion-icon name="ellipsis-horizontal" class="text-xl transition-colors duration-200"></ion-icon>
          </button>
          <ul tabindex="0" 
              class="dropdown-content z-[1] w-48 p-2 mt-2 bg-base-100 rounded-xl shadow-xl border border-base-200 dark:border-base-content/10 overflow-hidden"
              role="menu">
            
              




<li role="none">
  <a href="/en/posts" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="Archives">
    <ion-icon name="library-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">Archives</span>
    
    <span class="badge badge-sm badge-ghost font-normal">9</span>
    
  </a>
</li>





            
              




<li role="none">
  <a href="/en/tags" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="All Tags">
    <ion-icon name="pricetags-outline" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">All Tags</span>
    
    <span class="badge badge-sm badge-ghost font-normal">65</span>
    
  </a>
</li>





            
              




<li role="none">
    <a href="https://github.com/rianvy" 
       role="menuitem"
       class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
       target="_blank"
       rel="noopener noreferrer"
       title="GitHub">
      
      <ion-icon name="logo-github" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
      
      <span class="flex-1">GitHub</span>
      
      <ion-icon name="open-outline" class="text-xs text-base-content/40 flex-shrink-0"></ion-icon>
      
    </a>
  </li>
  

            
              





<li role="none">
  <a href="/en/index.xml" 
     role="menuitem"
     class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium cursor-pointer transition-all duration-200 hover:bg-base-200 active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50"
     title="RSS"
     target="_blank"
     rel="noopener noreferrer">
    <ion-icon name="logo-rss" class="text-lg flex-shrink-0 text-base-content/70"></ion-icon>
    <span class="flex-1">RSS</span>
    <ion-icon name="open-outline" class="text-xs text-base-content/40 flex-shrink-0"></ion-icon>
  </a>
</li>





            

            
              










            
          </ul>
        </div>
      
    </section>
  </div>
</nav>
	
	<style>
	.flip-container .back {
	  opacity: 0;
	  visibility: hidden;
	  transition: opacity 0.3s ease, visibility 0.3s ease;
	}

	.flip-container.flip-it .back {
	  opacity: 1;
	  visibility: visible;
	}
	</style>

    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            

<div class="reading-progress" id="reading-progress"></div>
<div class="reading-progress-text" id="reading-progress-text">0%</div>

<div class="lg:grid lg:grid-cols-12 gap-6 mt-4 px-4 max-w-screen-2xl mx-auto">
  
  <aside class="hidden lg:block lg:col-span-2 left-sidebar">
    <div class="sticky top-20 space-y-4">
      
      <div class="flex flex-col gap-2">
        <button onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="btn btn-ghost btn-sm gap-2" aria-label="Back to top">
          <ion-icon name="arrow-up-outline"></ion-icon>
          <span class="text-xs">Back to top</span>
        </button>
        <button onclick="toggleFocusMode()" class="btn btn-ghost btn-sm gap-2" id="focus-mode-btn" aria-label="Focus Mode">
          <ion-icon name="eye-outline" id="focus-mode-icon"></ion-icon>
          <span class="text-xs" id="focus-mode-text">Focus</span>
        </button>
      </div>
    </div>
  </aside>

  
  <article class="lg:col-span-7 mx-auto prose prose-quoteless dark:prose-invert w-full max-w-4xl" id="dream-single-post-main" itemscope itemtype="http://schema.org/Article">
    
  <meta itemprop="name" content="Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries">
  <meta itemprop="description" content="Deep dive into how VK&#39;s Long Poll works, building a sniffer to intercept events, and discovering undocumented event codes. Bonus: the online status mystery and WebSocket.">
  <meta itemprop="datePublished" content="2026-02-04T13:52:09+03:00">
  <meta itemprop="dateModified" content="2026-02-04T13:52:09+03:00">
  <meta itemprop="wordCount" content="2677">
  <meta itemprop="image" content="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/Cover.png">
  <meta itemprop="keywords" content="VK Long Poll,VK event interception,VKontakte reverse engineering,VK API events,VK browser extension">

    <header class="not-prose mb-6 sm:mb-8">
      
      <nav class="text-xs sm:text-sm breadcrumbs mb-3 sm:mb-4 overflow-x-auto scrollbar-none">
        <ul class="flex-nowrap">
          <li class="shrink-0"><a href="/en/">Home</a></li>
          
          <li class="shrink-0"><a href="/en/posts">Posts</a></li>
          
          
          <li class="shrink-0"><a href="/en/categories/Development">Development</a></li>
          
          <li class="truncate max-w-[150px] sm:max-w-[200px] md:max-w-none">Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries</li>
        </ul>
      </nav>

      
      
      <div class="flex flex-wrap gap-1.5 sm:gap-2 mb-3 sm:mb-4">
        
        
        <a href="/en/categories/development/" 
          class="badge badge-sm sm:badge-md badge-ghost hover:badge-primary transition-colors" 
          rel="category">
          Development
        </a>
        
        <a href="/en/categories/reverse-engineering/" 
          class="badge badge-sm sm:badge-md badge-ghost hover:badge-primary transition-colors" 
          rel="category">
          Reverse Engineering
        </a>
        
      </div>
      

      
      <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold leading-tight sm:leading-snug mb-3 sm:mb-4 break-words hyphens-auto" 
          itemprop="headline">
        Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries
      </h1>

      
      <div class="grid grid-cols-2 sm:flex sm:flex-wrap items-center gap-x-3 sm:gap-x-4 gap-y-2 text-xs sm:text-sm text-base-content/70 mb-4 sm:mb-6">
        
        <time datetime="2026-02-04" class="flex items-center gap-1 min-w-0">
          <ion-icon name="calendar-outline" class="text-sm sm:text-base shrink-0"></ion-icon>
          <span class="truncate">
            
            <span data-format="luxon">2026-02-04T13:52:09&#43;03:00</span>
            
          </span>
        </time>

        
        <span class="flex items-center gap-1">
          <ion-icon name="time-outline" class="text-sm sm:text-base shrink-0"></ion-icon>
          <span class="truncate">
            13<span class="hidden xs:inline">  minutes read</span><span class="xs:hidden"> –º–∏–Ω</span>
          </span>
        </span>

        
        <span class="hidden sm:flex items-center gap-1">
          <ion-icon name="document-text-outline" class="text-sm sm:text-base shrink-0"></ion-icon>
          2677 words
        </span>

        
        
      </div>

      
      <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 sm:gap-4 py-3 sm:py-4 border-y border-base-300">
        <div class="min-w-0 flex-1">
          <div class="flex items-center">
  
  <div class="avatar mr-1">
    <div class="w-8 rounded-full">
      <img class="my-0" src="/img/avatar.jpg" alt="Rianvy" />
    </div>
  </div>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">Rianvy</span>
    
  
  </span>
</div>

        </div>
        <div class="flex justify-start sm:justify-end shrink-0">
          <div class="flex items-center gap-2">
  
  

  
  
  
  
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://x.com/intent/post?text=Reverse%20Engineering%20VK%20Long%20Poll:%20Building%20a%20Sniffer,%20Discovering%20Hidden%20Events,%20and%20WebSocket%20Mysteries&amp;url=https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/" target="_blank" rel="noopener noreferrer"
      title="Share on X">
      <ion-icon class="group-hover:text-primary-content" name="logo-x"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://facebook.com/sharer/sharer.php?u=https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/" target="_blank" rel="noopener noreferrer"
      title="Share on Facebook">
      <ion-icon class="group-hover:text-primary-content" name="logo-facebook"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://wa.me/?text=Reverse%20Engineering%20VK%20Long%20Poll:%20Building%20a%20Sniffer,%20Discovering%20Hidden%20Events,%20and%20WebSocket%20Mysteries%20https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/" target="_blank" rel="noopener noreferrer"
      title="Share on WhatsApp">
      <ion-icon class="group-hover:text-primary-content" name="logo-whatsapp"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://t.me/share/url?url=https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/&amp;resubmit=true&amp;title=Reverse%20Engineering%20VK%20Long%20Poll:%20Building%20a%20Sniffer,%20Discovering%20Hidden%20Events,%20and%20WebSocket%20Mysteries" target="_blank" rel="noopener noreferrer"
      title="Share on Telegram">
      <ion-icon class="group-hover:text-primary-content" name="send"></ion-icon>
    </a>
  

  
  
</div>

        </div>
      </div>
    </header>

    
    
    <div class="not-prose mb-8">
      <div class="flex flex-col sm:flex-row items-start sm:items-center gap-3 p-4 rounded-xl border border-base-300 bg-base-200/50">
        
        <div class="flex items-center gap-2 text-base-content/70">
          <span class="relative flex h-3 w-3">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
            <span class="relative inline-flex rounded-full h-3 w-3 bg-primary"></span>
          </span>
          <ion-icon name="language-outline" class="text-xl"></ion-icon>
          <span class="text-sm whitespace-nowrap">This post is also available in</span>
        </div>
        
        
        <div class="hidden sm:block w-px h-6 bg-base-300"></div>
        
        
        <div class="flex flex-wrap gap-2">
          
          <a href="https://0x69.ru/ru/posts/reverse-engineering-vk-long-poll/" 
            class="group inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm 
                    bg-base-100 hover:bg-primary hover:text-primary-content 
                    border border-base-300 hover:border-primary
                    transition-all duration-200 no-underline"
            rel="noopener noreferrer"
            hreflang="ru">
            <span class="opacity-70 group-hover:opacity-100">
              üá∑üá∫
            </span>
            –†—É—Å—Å–∫–∏–π
            <ion-icon name="arrow-forward" class="text-xs opacity-0 -ml-1 group-hover:opacity-100 group-hover:ml-0 transition-all"></ion-icon>
          </a>
          
        </div>
      </div>
    </div>
    

    
    
    <figure class="not-prose mb-8">
      <img src="https://0x69.ru/en/posts/reverse-engineering-vk-long-poll/Cover.png" alt="Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries" class="w-full rounded-xl shadow-lg" loading="lazy"/>
    </figure>
    

    
    

    
    <section id="dream-single-post-content" class="fade-in-up" itemprop="articleBody">
      <p>A deep dive into how VK&rsquo;s Long Poll works, building a sniffer to intercept events, and discovering undocumented event codes.</p>
<h2 id="introduction">Introduction</h2>
<p>While developing VKify, a browser extension to enhance VKontakte functionality, I faced an interesting challenge: <strong>tracking user actions in real-time</strong> ‚Äî who&rsquo;s typing, who read a message, who deleted it.</p>
<p>Official VK API documentation for Long Poll exists, but it&rsquo;s incomplete and partially outdated. Many event codes are undocumented, and the data structure can differ from what&rsquo;s described. I had to reverse engineer the protocol myself.</p>
<p>In this article, I&rsquo;ll cover:</p>
<ul>
<li>What Long Poll is and why it matters</li>
<li>How to intercept network requests in the browser</li>
<li>How I built a sniffer for event analysis</li>
<li>What pitfalls I encountered (spoiler: online status might go through WebSocket)</li>
<li>Ready-to-use code you can use</li>
</ul>
<hr>
<h2 id="what-is-long-poll">What is Long Poll?</h2>
<p><strong>Long Polling</strong> is a technique for receiving real-time updates from a server. Unlike regular requests, the client sends a request and the server <strong>keeps the connection open</strong> until new data arrives or a timeout occurs.</p>
<p>VKontakte uses Long Poll for instant event delivery:</p>
<ul>
<li>New messages</li>
<li>&ldquo;Typing&hellip;&rdquo; status</li>
<li>Message read receipts</li>
<li>Message deletion</li>
<li>And much more</li>
</ul>
<p>Requests go to an endpoint like:</p>
<pre><code>https://api.vk.com/ruimXXXXXXXXX?version=21&amp;mode=682
</code></pre>
<p>Where <code>XXXXXXXXX</code> is your user ID.</p>
<hr>
<h2 id="step-1-basic-fetch-interception">Step 1: Basic Fetch Interception</h2>
<p>Let&rsquo;s start with basic interception. The idea is simple: override the global <code>fetch</code> function, analyze responses, and pass them through.</p>
<pre><code class="language-javascript">/**
 * Basic Long Poll Interceptor
 * Paste into browser console on any VK page
 */
(function() {
  const originalFetch = window.fetch;

  window.fetch = async function(url, options) {
    const response = await originalFetch.apply(this, arguments);
    const urlStr = url?.toString() || '';

    // Only catch Long Poll requests
    if (/api\.vk\.com\/ruim/.test(urlStr)) {
      try {
        const clone = response.clone();
        const data = await clone.json();

        if (data.updates &amp;&amp; data.updates.length &gt; 0) {
          console.log('[Long Poll] Events received:', data.updates.length);
          data.updates.forEach(update =&gt; {
            console.log('  Code:', update[0], '| Data:', update.slice(1));
          });
        }
      } catch (e) {}
    }

    return response;
  };

  console.log('‚úÖ Long Poll interceptor activated');
})();
</code></pre>
<p>Paste this code into the browser console (F12 ‚Üí Console) on any VKontakte page and start messaging. You&rsquo;ll see a stream of events.</p>
<hr>
<h2 id="step-2-advanced-sniffer-for-analysis">Step 2: Advanced Sniffer for Analysis</h2>
<p>A simple interceptor is good for starters, but I needed to systematize the data. I built a full-featured sniffer that:</p>
<ul>
<li>Collects statistics for each event code</li>
<li>Saves examples for structure analysis</li>
<li>Allows searching and exporting data</li>
</ul>
<pre><code class="language-javascript">/**
 * VK Long Poll Event Sniffer
 * Advanced tool for event analysis
 * 
 * After pasting, type __sniffer.help() for help
 */
(function() {
  'use strict';

  if (window.__vkEventSniffer) {
    console.log('[Sniffer] Already running. Commands: __sniffer.help()');
    return;
  }

  // Event storage
  const eventCodes = new Map(); // code -&gt; { count, samples, lastSeen }
  let totalEvents = 0;
  let isRunning = true;

  const originalFetch = window.fetch;

  window.fetch = async function(url, options) {
    const response = await originalFetch.apply(this, arguments);

    if (!isRunning) return response;

    const urlStr = url?.toString() || '';

    if (/api\.vk\.com\/ruim/.test(urlStr)) {
      try {
        const clone = response.clone();
        const data = await clone.json();

        if (data.updates?.length &gt; 0) {
          console.groupCollapsed(
            `%c[Long Poll]%c ${data.updates.length} events`,
            'background: #5181b8; color: white; padding: 2px 8px; border-radius: 4px;',
            'color: #666; margin-left: 8px;'
          );

          data.updates.forEach(update =&gt; {
            const code = update[0];

            // Update statistics
            if (!eventCodes.has(code)) {
              eventCodes.set(code, { count: 0, samples: [], lastSeen: null });
              // Notify about new event type
              console.log(
                `%cüÜï New event code discovered: ${code}%c`,
                'background: #4CAF50; color: white; padding: 2px 8px; border-radius: 4px; font-weight: bold;',
                ''
              );
            }
            
            const stats = eventCodes.get(code);
            stats.count++;
            stats.lastSeen = new Date().toLocaleTimeString();
            if (stats.samples.length &lt; 5) {
              stats.samples.push([...update]);
            }
            totalEvents++;

            // Output to console
            console.log(`üì® Code ${code}:`, update.slice(1));
          });

          console.groupEnd();
        }
      } catch (e) {}
    }

    return response;
  };

  // Management API
  window.__sniffer = {
    // Show all discovered codes
    codes() {
      if (eventCodes.size === 0) {
        console.log('%c‚ö†Ô∏è No events detected yet.%c\n\nMake sure you:\n1. Are on a VK page\n2. Have a chat open\n3. Are sending/receiving messages', 
          'color: #FF9800; font-weight: bold;', '');
        return;
      }
      
      console.log('%c\nüìä Event Statistics\n', 'font-size: 14px; font-weight: bold;');
      
      const sorted = [...eventCodes.entries()].sort((a, b) =&gt; b[1].count - a[1].count);
      
      console.table(sorted.map(([code, stats]) =&gt; ({
        'Code': code,
        'Count': stats.count,
        'Last seen': stats.lastSeen,
        'Example (first 4 items)': JSON.stringify(stats.samples[0]?.slice(0, 4) || [])
      })));
      
      console.log(`\nTotal events: ${totalEvents}`);
      console.log(`Unique codes: ${eventCodes.size}`);
      return sorted;
    },

    // Detailed analysis of specific code
    inspect(code) {
      const stats = eventCodes.get(code);
      if (!stats) {
        console.log(`‚ùå Code ${code} not found.`);
        if (eventCodes.size &gt; 0) {
          console.log(`Available codes:`, [...eventCodes.keys()].join(', '));
        } else {
          console.log('No events detected yet. Wait or trigger some events (send a message).');
        }
        return;
      }
      
      console.log(`%c\nüîç Event ${code} Analysis\n`, 'font-size: 14px; font-weight: bold;');
      console.log(`Total intercepted: ${stats.count}`);
      console.log(`Last seen: ${stats.lastSeen}\n`);
      
      console.log('Examples (up to 5):');
      stats.samples.forEach((sample, i) =&gt; {
        console.log(`\n#${i + 1}:`);
        sample.forEach((value, idx) =&gt; {
          const type = typeof value;
          const display = type === 'object' ? JSON.stringify(value) : value;
          console.log(`  [${idx}] (${type}): ${display}`);
        });
      });
      
      return stats;
    },

    // Search by content
    search(keyword) {
      if (eventCodes.size === 0) {
        console.log('‚ö†Ô∏è No data to search.');
        return [];
      }
      
      const found = [];
      eventCodes.forEach((stats, code) =&gt; {
        stats.samples.forEach(sample =&gt; {
          if (JSON.stringify(sample).toLowerCase().includes(keyword.toLowerCase())) {
            found.push({ code, sample });
          }
        });
      });
      
      if (found.length === 0) {
        console.log(`Nothing found for &quot;${keyword}&quot;`);
      } else {
        console.log(`Found ${found.length} matches for &quot;${keyword}&quot;:`, found);
      }
      return found;
    },

    // Controls
    stop() { isRunning = false; console.log('‚è∏Ô∏è Sniffer paused'); },
    start() { isRunning = true; console.log('‚ñ∂Ô∏è Sniffer started'); },
    clear() { eventCodes.clear(); totalEvents = 0; console.log('üóëÔ∏è Statistics cleared'); },
    
    // Export
    export() {
      if (eventCodes.size === 0) {
        console.log('‚ö†Ô∏è No data to export.');
        return null;
      }
      
      const data = {
        exportedAt: new Date().toISOString(),
        totalEvents,
        events: Object.fromEntries(eventCodes)
      };
      console.log(JSON.stringify(data, null, 2));
      return data;
    },
    
    // Status
    status() {
      console.log(`
%cüìä Sniffer Status%c
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Active: ${isRunning ? '‚úÖ Yes' : '‚ùå No'}
Total events: ${totalEvents}
Unique codes: ${eventCodes.size}
${eventCodes.size &gt; 0 ? `Codes: ${[...eventCodes.keys()].join(', ')}` : ''}
`,
        'font-weight: bold; font-size: 12px;', ''
      );
    },

    // Help
    help() {
      console.log(`
%c‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           VK Long Poll Event Sniffer                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù%c

%cHow to use:%c
1. Keep the console open
2. Open a chat with someone  
3. Ask them to type or send a message
4. Events will appear in the console automatically

%cCommands:%c
  __sniffer.status()     ‚Äî Current status and found codes
  __sniffer.codes()      ‚Äî Detailed statistics of all events
  __sniffer.inspect(63)  ‚Äî Deep analysis of event code 63
  __sniffer.search('id') ‚Äî Search by content
  __sniffer.export()     ‚Äî Export all data to JSON
  
%cControls:%c
  __sniffer.stop()       ‚Äî Pause interception
  __sniffer.start()      ‚Äî Resume interception
  __sniffer.clear()      ‚Äî Clear statistics
`,
        'color: #5181b8; font-weight: bold;', '',
        'color: #4CAF50; font-weight: bold;', '',
        'color: #2196F3; font-weight: bold;', '',
        'color: #FF9800; font-weight: bold;', ''
      );
    }
  };

  window.__vkEventSniffer = true;

  console.log(`
%cüîç VK Event Sniffer activated!%c

%cWhat's next:%c
‚Ä¢ Open any VK chat
‚Ä¢ Ask someone to send you a message
‚Ä¢ Events will appear here automatically

%cCommands:%c __sniffer.help() ‚Äî help, __sniffer.status() ‚Äî status
`,
    'color: #5181b8; font-weight: bold; font-size: 14px;', '',
    'color: #4CAF50; font-weight: bold;', '',
    'background: #151515; padding: 2px 6px; border-radius: 3px;', ''
  );

})();
</code></pre>
<p><strong>How to use:</strong></p>
<ol>
<li>Paste the code into the console on a VK page</li>
<li>Open a chat with someone</li>
<li>Ask them to start typing or send a message</li>
<li>Events will appear in the console automatically</li>
<li>Type <code>__sniffer.codes()</code> to see statistics</li>
</ol>
<h3 id="the-sniffer-in-action">The Sniffer in Action</h3>
<p>After activation, the sniffer starts intercepting all Long Poll events. Each time a data packet arrives, it&rsquo;s grouped in the console with the event count:</p>
<p><img src="/en/posts/reverse-engineering-vk-long-poll/img/gBMlhcMDqy.png" alt="Sniffer interface in browser console"></p>
<p>The screenshot shows how the sniffer logs incoming events. Each <code>[Long Poll]</code> group contains a list of events with their codes and data. Note the codes: <code>63</code> is the &ldquo;typing&rdquo; event, <code>10004</code> is a new message, and so on. This is exactly how I gathered information about each event type&rsquo;s structure.</p>
<p>After collecting enough data, you can call <code>__sniffer.codes()</code> to view statistics:</p>
<p><img src="/en/posts/reverse-engineering-vk-long-poll/img/chrome_3RKqYYXFj5.png" alt="Event statistics from __sniffer.codes() command"></p>
<p>The table shows all discovered event codes, how often each occurred, when it was last seen, and example data. This helps quickly understand which events happen most frequently and which deserve closer analysis.</p>
<hr>
<h2 id="step-3-what-i-discovered">Step 3: What I Discovered</h2>
<p>After several hours of testing with a friend&rsquo;s help (thanks for putting up with my &ldquo;send me a message&rdquo;, &ldquo;delete the message&rdquo;, &ldquo;go offline&rdquo; requests), I mapped out the events.</p>
<h3 id="documented-events-working">Documented Events (Working)</h3>

<div class="hidden md:block overflow-x-auto my-6 not-prose">
  <table class="table table-zebra table-sm lg:table-md w-full">
    <thead>
      
      <tr>
        
        <th 
          class="text-base-content/80"
        >
          Code
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Event
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Structure
        </th>
        
      </tr>
      
    </thead>
    <tbody>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>63</strong>
        </td>
        
        <td 
          class=""
        >
          Typing message
        </td>
        
        <td 
          class=""
        >
          <code>[63, userId, [chatIds], flag, peerId]</code>
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>64</strong>
        </td>
        
        <td 
          class=""
        >
          Recording voice
        </td>
        
        <td 
          class=""
        >
          <code>[64, userId, [chatIds], flag, timestamp]</code>
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>52</strong>
        </td>
        
        <td 
          class=""
        >
          Friend request
        </td>
        
        <td 
          class=""
        >
          <code>[52, type, userId, ?]</code>
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>90</strong>
        </td>
        
        <td 
          class=""
        >
          Friend actions
        </td>
        
        <td 
          class=""
        >
          <code>[90, actionType, userId]</code>
        </td>
        
      </tr>
      
    </tbody>
  </table>
</div>


<div class="md:hidden my-6 space-y-3">
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>63</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Typing message
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[63, userId, [chatIds], flag, peerId]</code>
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>64</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Recording voice
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[64, userId, [chatIds], flag, timestamp]</code>
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>52</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Friend request
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[52, type, userId, ?]</code>
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>90</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Friend actions
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[90, actionType, userId]</code>
        </span>
      </div>
      
    </div>
  </div>
  
</div><h3 id="message-events-10000">Message Events (10000+)</h3>

<div class="hidden md:block overflow-x-auto my-6 not-prose">
  <table class="table table-zebra table-sm lg:table-md w-full">
    <thead>
      
      <tr>
        
        <th 
          class="text-base-content/80"
        >
          Code
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Event
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Structure
        </th>
        
      </tr>
      
    </thead>
    <tbody>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>10002</strong>
        </td>
        
        <td 
          class=""
        >
          Deleted for everyone
        </td>
        
        <td 
          class=""
        >
          <code>[10002, ?, flags, peerId, localId]</code>
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>10004</strong>
        </td>
        
        <td 
          class=""
        >
          New message
        </td>
        
        <td 
          class=""
        >
          <code>[10004, ?, flags, ?, fromId, peerId, text, {...}]</code>
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>10005</strong>
        </td>
        
        <td 
          class=""
        >
          Edit
        </td>
        
        <td 
          class=""
        >
          <code>[10005, ?, flags, fromId, timestamp, text, {...}]</code>
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          <strong>10007</strong>
        </td>
        
        <td 
          class=""
        >
          Read message
        </td>
        
        <td 
          class=""
        >
          <code>[10007, peerId, ?, ?, msgId]</code>
        </td>
        
      </tr>
      
    </tbody>
  </table>
</div>


<div class="md:hidden my-6 space-y-3">
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>10002</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Deleted for everyone
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[10002, ?, flags, peerId, localId]</code>
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>10004</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          New message
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[10004, ?, flags, ?, fromId, peerId, text, {...}]</code>
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>10005</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Edit
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[10005, ?, flags, fromId, timestamp, text, {...}]</code>
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Code
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <strong>10007</strong>
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Event
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Read message
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Structure
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <code>[10007, peerId, ?, ?, msgId]</code>
        </span>
      </div>
      
    </div>
  </div>
  
</div><h3 id="event-90-subcodes-friends">Event 90 Subcodes (Friends)</h3>

<div class="hidden md:block overflow-x-auto my-6 not-prose">
  <table class="table table-zebra table-sm lg:table-md w-full">
    <thead>
      
      <tr>
        
        <th 
          class="text-base-content/80"
        >
          Subcode
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Meaning
        </th>
        
      </tr>
      
    </thead>
    <tbody>
      
      <tr>
        
        <td 
          class=""
        >
          1
        </td>
        
        <td 
          class=""
        >
          Sent friend request
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          2
        </td>
        
        <td 
          class=""
        >
          Accepted your request
        </td>
        
      </tr>
      
      <tr>
        
        <td 
          class=""
        >
          3
        </td>
        
        <td 
          class=""
        >
          Removed you from friends
        </td>
        
      </tr>
      
    </tbody>
  </table>
</div>


<div class="md:hidden my-6 space-y-3">
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Subcode
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          1
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Meaning
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Sent friend request
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Subcode
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          2
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Meaning
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Accepted your request
        </span>
      </div>
      
    </div>
  </div>
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Subcode
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          3
        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Meaning
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          Removed you from friends
        </span>
      </div>
      
    </div>
  </div>
  
</div><hr>
<h2 id="step-4-the-online-status-mystery">Step 4: The Online Status Mystery</h2>
<p>According to documentation, events <strong>8</strong> (online) and <strong>9</strong> (offline) should come through Long Poll. But I wasn&rsquo;t seeing them!</p>
<p>I expanded the search and started intercepting <strong>all</strong> network requests:</p>
<pre><code class="language-javascript">/**
 * Universal network sniffer
 */
(function() {
  const originalFetch = window.fetch;
  const keywords = ['online', 'offline', 'last_seen', 'presence'];

  window.fetch = async function(url, options) {
    const response = await originalFetch.apply(this, arguments);
    
    try {
      const clone = response.clone();
      const text = await clone.text();
      
      // Search for keywords
      const found = keywords.filter(kw =&gt; text.toLowerCase().includes(kw));
      
      if (found.length &gt; 0) {
        console.log(`%c[MATCH: ${found.join(', ')}]%c ${url}`,
          'background: #4CAF50; color: white; padding: 2px 6px;', '');
        console.log(text.substring(0, 500));
      }
    } catch (e) {}
    
    return response;
  };
  
  console.log('‚úÖ Network sniffer activated. Searching for:', keywords.join(', '));
})();
</code></pre>
<p>And then I noticed something interesting in the logs:</p>
<pre><code>[WebSocket CREATED] wss://eh.vk.com/?v=1.000&amp;format=json&amp;app_id=6287487
</code></pre>
<p><strong>It appears VKontakte moved online statuses to WebSocket!</strong></p>
<hr>
<h2 id="step-5-websocket-interception">Step 5: WebSocket Interception</h2>
<p>WebSocket is a different protocol, and intercepting it requires a different approach:</p>
<pre><code class="language-javascript">/**
 * WebSocket sniffer for VK
 */
(function() {
  const OriginalWebSocket = window.WebSocket;

  window.WebSocket = function(url, protocols) {
    console.log('%c[WS Created]%c ' + url, 
      'background: #9C27B0; color: white; padding: 2px 6px;', '');

    const ws = protocols 
      ? new OriginalWebSocket(url, protocols) 
      : new OriginalWebSocket(url);

    ws.addEventListener('message', async function(event) {
      let data = event.data;
      
      // Data may come as Blob
      if (data instanceof Blob) {
        const buffer = await data.arrayBuffer();
        const bytes = new Uint8Array(buffer);
        // First byte is message type, rest is JSON
        const jsonStr = new TextDecoder().decode(bytes.slice(1));
        try {
          data = JSON.parse(jsonStr);
        } catch (e) {
          data = jsonStr;
        }
      }

      console.log('%c[WS Message]%c', 
        'background: #2196F3; color: white; padding: 2px 6px;', '', data);
    });

    return ws;
  };

  // Copy constants
  window.WebSocket.CONNECTING = OriginalWebSocket.CONNECTING;
  window.WebSocket.OPEN = OriginalWebSocket.OPEN;
  window.WebSocket.CLOSING = OriginalWebSocket.CLOSING;
  window.WebSocket.CLOSED = OriginalWebSocket.CLOSED;
  
  console.log('‚úÖ WebSocket sniffer activated');
})();
</code></pre>
<p>Data through <code>eh.vk.com</code> arrives in binary format. I managed to partially decode it, but couldn&rsquo;t fully figure out the protocol ‚Äî data came as Blob, and after decoding the first byte (message type), JSON remained, but the structure was complex.</p>
<p><strong>Important:</strong> I can&rsquo;t state with 100% certainty that online statuses go through this WebSocket. They might be transmitted differently, or VK might use a combination of methods. If you manage to dig deeper ‚Äî let me know, I&rsquo;d be interested!</p>
<p>For my project, I decided not to spend more time on this and removed the online status tracking feature.</p>
<hr>
<h2 id="production-ready-spy-module">Production-Ready Spy Module</h2>
<p>Based on my research, I wrote a production-ready module. It displays a message on activation and logs all recognized events:</p>
<pre><code class="language-javascript">/**
 * VKify Spy Module
 * Production version for browser extension
 * 
 * Usage:
 * 1. Paste into console on VK page
 * 2. Open a chat and wait for events
 * 3. Or subscribe to events: window.addEventListener('vkify-spy-event', e =&gt; console.log(e.detail))
 */
(function() {
  'use strict';

  if (window.__vkifySpyModule) {
    console.log('[VKify Spy] Already running');
    return;
  }
  window.__vkifySpyModule = true;

  // Event configuration (gathered through reverse engineering)
  const EVENT_CONFIG = {
    63: { action: 'is typing a message', icon: '‚å®Ô∏è', category: 'typing' },
    64: { action: 'is recording voice', icon: 'üé§', category: 'voice' },
    52: { action: 'friend event', icon: 'üë•', category: 'friends' },
    90: { action: 'friend event', icon: 'üë•', category: 'friends' },
    115: { action: 'is calling you', icon: 'üìû', category: 'calls' },
    10002: { action: 'deleted message for everyone', icon: 'üóëÔ∏è', category: 'delete' },
    10004: { action: 'sent a message', icon: 'üí¨', category: 'messages' },
    10005: { action: 'edited a message', icon: '‚úèÔ∏è', category: 'edit' },
    10007: { action: 'read a message', icon: 'üëÅÔ∏è', category: 'read' }
  };

  let eventCount = 0;

  function parseEvent(update) {
    const code = update[0];
    const config = EVENT_CONFIG[code];
    if (!config) return null;

    let userId = null;
    let extra = {};

    switch (code) {
      case 63: case 64:
        userId = update[1];
        break;
      case 52:
        userId = update[2];
        extra.type = update[1];
        break;
      case 90:
        userId = update[2];
        extra.actionType = update[1];
        break;
      case 115:
        userId = update[1]?.user_id || update[1]?.peer_id;
        break;
      case 10002:
        userId = update[3];
        break;
      case 10004:
        if (update[2] &amp; 2) return null; // Outgoing message
        userId = update[4];
        extra.text = update[6]?.substring(0, 100);
        break;
      case 10005:
        if (update[2] &amp; 2) return null;
        userId = update[3];
        extra.text = update[5]?.substring(0, 100);
        break;
      case 10007:
        userId = update[1];
        break;
    }

    if (!userId) return null;

    return { code, userId, ...config, extra, timestamp: new Date().toISOString() };
  }

  // Long Poll interception
  const originalFetch = window.fetch;

  window.fetch = async function(url, options) {
    const response = await originalFetch.apply(this, arguments);

    if (/api\.vk\.com\/ruim/.test(url?.toString() || '')) {
      try {
        const clone = response.clone();
        const data = await clone.json();

        data.updates?.forEach(update =&gt; {
          const event = parseEvent(update);
          if (event) {
            eventCount++;
            console.log(
              `%c[VKify Spy]%c ${event.icon} User ${event.userId}: ${event.action}`,
              'background: #5181b8; color: white; padding: 2px 6px; border-radius: 3px;',
              'color: inherit;',
              event.extra
            );
            
            // Dispatch custom event for subscribers
            window.dispatchEvent(new CustomEvent('vkify-spy-event', { 
              detail: event 
            }));
          }
        });
      } catch (e) {}
    }

    return response;
  };

  // Public API
  window.__vkifySpy = {
    getEventCount: () =&gt; eventCount,
    getConfig: () =&gt; EVENT_CONFIG,
    status() {
      console.log(`[VKify Spy] Active. Events intercepted: ${eventCount}`);
    }
  };

  console.log(`
%cüïµÔ∏è VKify Spy Module activated!%c

%cModule intercepts:%c
‚Ä¢ Message typing (‚å®Ô∏è)
‚Ä¢ Voice messages (üé§)
‚Ä¢ New messages (üí¨)
‚Ä¢ Read receipts (üëÅÔ∏è)
‚Ä¢ Message deletion (üóëÔ∏è)
‚Ä¢ Message edits (‚úèÔ∏è)
‚Ä¢ Friend events (üë•)
‚Ä¢ Calls (üìû)

%cHow to test:%c
1. Open any chat
2. Ask someone to message you
3. Events will appear in console

%cCommands:%c __vkifySpy.status()
`,
    'color: #5181b8; font-weight: bold; font-size: 14px;', '',
    'color: #4CAF50; font-weight: bold;', '',
    'color: #2196F3; font-weight: bold;', '',
    'background: #151515; padding: 2px 6px; border-radius: 3px;', ''
  );

})();
</code></pre>
<p><img src="/en/posts/reverse-engineering-vk-long-poll/img/lGNPO2eQMp.png" alt="Spy module in action"></p>
<hr>
<h2 id="conclusions-and-recommendations">Conclusions and Recommendations</h2>
<h3 id="what-i-learned">What I Learned</h3>
<ol>
<li><strong>Long Poll still works</strong> for most messenger events</li>
<li><strong>Online statuses may have moved to WebSocket</strong> (<code>eh.vk.com</code>) ‚Äî data arrives in binary format, couldn&rsquo;t fully decode it</li>
<li><strong>Event structure doesn&rsquo;t always match documentation</strong> ‚Äî testing required</li>
<li><strong>Codes 10000+</strong> ‚Äî these are &ldquo;new&rdquo; message events</li>
</ol>
<h3 id="reverse-engineering-tips">Reverse Engineering Tips</h3>
<ol>
<li><strong>Start simple</strong> ‚Äî basic fetch interception gives 80% of the information</li>
<li><strong>Collect statistics</strong> ‚Äî save examples of each event type</li>
<li><strong>Test with a helper</strong> ‚Äî some events are only visible from the other side</li>
<li><strong>Check WebSocket</strong> ‚Äî modern apps increasingly use it</li>
<li><strong>Document your findings</strong> ‚Äî in a month you&rsquo;ll forget what <code>update[3]</code> means</li>
</ol>
<h3 id="ethics">Ethics</h3>
<p>Remember that data interception is a tool. Use it for:</p>
<ul>
<li>‚úÖ Improving your own user experience</li>
<li>‚úÖ Educational purposes</li>
<li>‚úÖ Developing useful tools</li>
</ul>
<p>And don&rsquo;t use it for:</p>
<ul>
<li>‚ùå Tracking people without their knowledge</li>
<li>‚ùå Collecting others&rsquo; personal data</li>
<li>‚ùå Violating service ToS</li>
</ul>
<hr>
<h2 id="useful-links">Useful Links</h2>
<ul>
<li><a href="https://dev.vk.com/api/user-long-poll/getting-started" target="_blank">VK Long Poll Server Documentation</a>
 ‚Äî official docs (incomplete)</li>
<li><a href="https://developer.chrome.com/docs/devtools/network/" target="_blank">Chrome DevTools Network Panel</a>
 ‚Äî for request analysis</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank">MDN: Fetch API</a>
 ‚Äî for understanding interception</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket" target="_blank">MDN: WebSocket</a>
 ‚Äî for WS work</li>
</ul>
<hr>
<div class="divider my-8 text-base-content/20"></div>

<div class="flex justify-center my-6">
  <button onclick="document.getElementById('donation-modal').showModal()"
          class="btn btn-lg btn-primary rounded-full shadow-lg hover:shadow-xl 
                 transition-all duration-300 hover:-translate-y-1 hover:scale-[1.02] 
                 active:scale-[0.98] gap-2 px-8 border-0 no-underline">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
      <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
    </svg>
    <span>Support the project</span>
  </button>
</div>

<div class="divider my-8 text-base-content/20"></div>


<dialog id="donation-modal" class="modal modal-bottom sm:modal-middle">
  <div class="modal-box bg-base-100 p-0 overflow-hidden shadow-2xl max-w-md">
    
    
    <div class="bg-primary p-6 relative">
      <form method="dialog" class="absolute top-4 right-4">
        <button class="btn btn-sm btn-circle btn-ghost text-primary-content/70 
                       hover:text-primary-content hover:bg-primary-content/10">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </form>
      
      <div class="flex items-center gap-4">
        <div class="bg-primary-content/15 p-3 rounded-full">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary-content" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
          </svg>
        </div>
        <div>
          <h3 class="text-xl font-bold text-primary-content">Support the Project</h3>
          <p class="text-primary-content/80 text-sm mt-1">Choose a convenient method</p>
        </div>
      </div>
    </div>
    
    
    <div class="p-6 space-y-4">
      
      
      <a href="https://pay.cloudtips.ru/p/b59e1765" 
         target="_blank"
         rel="noopener noreferrer"
         class="group flex items-center gap-4 p-4 rounded-xl border-2 border-base-300 
                hover:border-primary hover:shadow-lg hover:bg-base-200/50
                transition-all duration-200 no-underline block">
        <div class="flex-shrink-0 w-12 h-12 bg-blue-600 rounded-xl 
                    flex items-center justify-center shadow-md">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4 4 0 003 15z" />
          </svg>
        </div>
        <div class="flex-grow min-w-0">
          <h4 class="font-semibold text-base text-base-content">Cloudtips</h4>
          <p class="text-sm text-base-content/60 mt-0.5">For users from Russia</p>
        </div>
        <div class="flex-shrink-0 text-base-content/30 group-hover:text-primary 
                    transition-all group-hover:translate-x-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </div>
      </a>
      
      
      <a href="https://t.me/tribute/app?startapp=dE4k" 
         target="_blank"
         rel="noopener noreferrer"
         class="group flex items-center gap-4 p-4 rounded-xl border-2 border-base-300 
                hover:border-primary hover:shadow-lg hover:bg-base-200/50
                transition-all duration-200 no-underline block">
        <div class="flex-shrink-0 w-12 h-12 bg-purple-600 rounded-xl 
                    flex items-center justify-center shadow-md">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
          </svg>
        </div>
        <div class="flex-grow min-w-0">
          <h4 class="font-semibold text-base text-base-content">Tribute</h4>
          <p class="text-sm text-base-content/60 mt-0.5">International cards, Telegram Stars, USDT, Bitcoin, Toncoin, Notcoin</p>
        </div>
        <div class="flex-shrink-0 text-base-content/30 group-hover:text-primary 
                    transition-all group-hover:translate-x-1">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </div>
      </a>
      
      
      <div class="mt-6 p-4 bg-base-200/50 rounded-xl">
        <div class="flex items-center gap-3">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-primary flex-shrink-0" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
          </svg>
          <p class="text-sm text-base-content/70">
            All payments are secure. Any support helps develop the project and create new content ‚ù§Ô∏è
          </p>
        </div>
      </div>
    </div>
  </div>
  
  
  <form method="dialog" class="modal-backdrop bg-black/50">
    <button>Close</button>
  </form>
</dialog>
<p><em>Article written as part of <a href="https://0x69.ru/en/portfolio/vkify-vkontakte-extension/" target="_blank">VKify</a>
 development</em></p>
    </section>

    
    

    
    
    

    
    
    <footer class="not-prose mt-12 pt-6 border-t border-base-300">
      <div class="flex flex-wrap items-center gap-2">
        <ion-icon name="pricetags-outline" class="text-lg text-base-content/60"></ion-icon>
        
        
        <a href="/en/tags/javascript/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Javascript
        </a>
        
        <a href="/en/tags/vk-api/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #VK-api
        </a>
        
        <a href="/en/tags/long-poll/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Long-poll
        </a>
        
        <a href="/en/tags/websocket/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Websocket
        </a>
        
        <a href="/en/tags/reverse-engineering/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Reverse-engineering
        </a>
        
        <a href="/en/tags/browser-extension/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Browser-extension
        </a>
        
        <a href="/en/tags/sniffer/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Sniffer
        </a>
        
        <a href="/en/tags/traffic-interception/" class="badge badge-ghost hover:badge-primary transition-colors" rel="tag">
          #Traffic-interception
        </a>
        
      </div>
    </footer>
    

    
    
    <nav class="not-prose mt-8" aria-label="Post navigation">
      <div class="divider"></div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div></div>

        
        <a href="/en/posts/kak-smotret-filmy-4k-lampa-torrserver/" class="group card bg-base-200 hover:bg-base-300 transition-colors p-4 md:text-right">
          <div class="flex items-center gap-3 md:flex-row-reverse">
            <ion-icon name="chevron-forward" class="text-xl text-base-content/50 group-hover:text-primary transition-colors"></ion-icon>
            <div class="min-w-0">
              <span class="text-xs text-base-content/60 uppercase tracking-wide">Next page</span>
              <p class="font-medium truncate">How to Watch Movies and TV Shows in 4K via Lampa and TorrServer</p>
            </div>
          </div>
        </a>
        
      </div>
    </nav>
    

    
    
  </article>

  
  <aside class="hidden lg:block lg:col-span-3 right-sidebar">
    <div class="sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto space-y-6 pr-2">
      
      

      
      
      <div class="card bg-base-200 p-4">
        <h3 class="font-semibold mb-3 flex items-center gap-2">
          <ion-icon name="list-outline"></ion-icon>
          Contents
        </h3>
        <nav class="text-sm">
          <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#what-is-long-poll">What is Long Poll?</a></li>
    <li><a href="#step-1-basic-fetch-interception">Step 1: Basic Fetch Interception</a></li>
    <li><a href="#step-2-advanced-sniffer-for-analysis">Step 2: Advanced Sniffer for Analysis</a>
      <ul>
        <li><a href="#the-sniffer-in-action">The Sniffer in Action</a></li>
      </ul>
    </li>
    <li><a href="#step-3-what-i-discovered">Step 3: What I Discovered</a>
      <ul>
        <li><a href="#documented-events-working">Documented Events (Working)</a></li>
        <li><a href="#message-events-10000">Message Events (10000+)</a></li>
        <li><a href="#event-90-subcodes-friends">Event 90 Subcodes (Friends)</a></li>
      </ul>
    </li>
    <li><a href="#step-4-the-online-status-mystery">Step 4: The Online Status Mystery</a></li>
    <li><a href="#step-5-websocket-interception">Step 5: WebSocket Interception</a></li>
    <li><a href="#production-ready-spy-module">Production-Ready Spy Module</a></li>
    <li><a href="#conclusions-and-recommendations">Conclusions and Recommendations</a>
      <ul>
        <li><a href="#what-i-learned">What I Learned</a></li>
        <li><a href="#reverse-engineering-tips">Reverse Engineering Tips</a></li>
        <li><a href="#ethics">Ethics</a></li>
      </ul>
    </li>
    <li><a href="#useful-links">Useful Links</a></li>
  </ul>
</nav>
        </nav>
      </div>
      
    </div>
  </aside>
</div>


<div class="lg:hidden sticky bottom-6 z-50 pointer-events-none">
  <div class="flex justify-end pr-6">
    <button onclick="document.getElementById('mobile-actions-modal').showModal()" 
            class="pointer-events-auto btn btn-circle btn-primary shadow-2xl w-14 h-14 group">
      <ion-icon name="apps" class="text-2xl transition-transform duration-300 group-active:scale-90"></ion-icon>
    </button>
  </div>
</div>


<dialog id="mobile-actions-modal" class="modal modal-bottom lg:hidden">
  <div class="modal-box rounded-t-3xl pb-8">
    
    <div class="flex justify-center mb-4">
      <div class="w-12 h-1.5 bg-base-300 rounded-full"></div>
    </div>
    
    
    <div class="flex items-center justify-between mb-6">
      <h3 class="font-bold text-lg flex items-center gap-2">
        <ion-icon name="apps-outline" class="text-primary"></ion-icon>
        Quick Actions
      </h3>
      <button onclick="document.getElementById('mobile-actions-modal').close()" 
              class="btn btn-circle btn-ghost btn-sm">
        <ion-icon name="close" class="text-xl"></ion-icon>
      </button>
    </div>
    
    
    <div class="grid grid-cols-4 gap-3">
      
      <button onclick="window.scrollTo({top: 0, behavior: 'smooth'}); document.getElementById('mobile-actions-modal').close();"
              class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-base-200 active:scale-95 transition-transform">
        <div class="w-12 h-12 rounded-full bg-info/20 flex items-center justify-center">
          <ion-icon name="arrow-up" class="text-2xl text-info"></ion-icon>
        </div>
        <span class="text-xs">Top</span>
      </button>
      
      
      
      <button onclick="document.getElementById('mobile-actions-modal').close(); setTimeout(() => document.getElementById('mobile-toc-modal').showModal(), 150);"
              class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-base-200 active:scale-95 transition-transform">
        <div class="w-12 h-12 rounded-full bg-success/20 flex items-center justify-center">
          <ion-icon name="list" class="text-2xl text-success"></ion-icon>
        </div>
        <span class="text-xs">Contents</span>
      </button>
      
      
      
      <button onclick="navigator.share({title: 'Reverse Engineering VK Long Poll: Building a Sniffer, Discovering Hidden Events, and WebSocket Mysteries', url: 'https:\/\/0x69.ru\/en\/posts\/reverse-engineering-vk-long-poll\/'}).catch(() => {}); document.getElementById('mobile-actions-modal').close();"
              class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-base-200 active:scale-95 transition-transform">
        <div class="w-12 h-12 rounded-full bg-warning/20 flex items-center justify-center">
          <ion-icon name="share-social" class="text-2xl text-warning"></ion-icon>
        </div>
        <span class="text-xs">Share</span>
      </button>
      
      
      <button onclick="navigator.clipboard.writeText('https:\/\/0x69.ru\/en\/posts\/reverse-engineering-vk-long-poll\/'); document.getElementById('mobile-actions-modal').close();"
              class="flex flex-col items-center gap-2 p-3 rounded-2xl bg-base-200 active:scale-95 transition-transform">
        <div class="w-12 h-12 rounded-full bg-error/20 flex items-center justify-center">
          <ion-icon name="copy" class="text-2xl text-error"></ion-icon>
        </div>
        <span class="text-xs">Copy</span>
      </button>
    </div>
  </div>
  
  <form method="dialog" class="modal-backdrop bg-black/50">
    <button>close</button>
  </form>
</dialog>



<dialog id="mobile-toc-modal" class="modal modal-bottom">
  <div class="modal-box rounded-t-3xl max-h-[75vh]">
    <div class="flex justify-center mb-4">
      <div class="w-12 h-1.5 bg-base-300 rounded-full"></div>
    </div>
    
    <div class="flex items-center justify-between mb-4">
      <h3 class="font-bold text-lg">Contents</h3>
      <button onclick="document.getElementById('mobile-toc-modal').close()" class="btn btn-circle btn-ghost btn-sm">
        <ion-icon name="close" class="text-xl"></ion-icon>
      </button>
    </div>
    
    <nav class="overflow-y-auto" onclick="if(event.target.tagName === 'A') document.getElementById('mobile-toc-modal').close();">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#what-is-long-poll">What is Long Poll?</a></li>
    <li><a href="#step-1-basic-fetch-interception">Step 1: Basic Fetch Interception</a></li>
    <li><a href="#step-2-advanced-sniffer-for-analysis">Step 2: Advanced Sniffer for Analysis</a>
      <ul>
        <li><a href="#the-sniffer-in-action">The Sniffer in Action</a></li>
      </ul>
    </li>
    <li><a href="#step-3-what-i-discovered">Step 3: What I Discovered</a>
      <ul>
        <li><a href="#documented-events-working">Documented Events (Working)</a></li>
        <li><a href="#message-events-10000">Message Events (10000+)</a></li>
        <li><a href="#event-90-subcodes-friends">Event 90 Subcodes (Friends)</a></li>
      </ul>
    </li>
    <li><a href="#step-4-the-online-status-mystery">Step 4: The Online Status Mystery</a></li>
    <li><a href="#step-5-websocket-interception">Step 5: WebSocket Interception</a></li>
    <li><a href="#production-ready-spy-module">Production-Ready Spy Module</a></li>
    <li><a href="#conclusions-and-recommendations">Conclusions and Recommendations</a>
      <ul>
        <li><a href="#what-i-learned">What I Learned</a></li>
        <li><a href="#reverse-engineering-tips">Reverse Engineering Tips</a></li>
        <li><a href="#ethics">Ethics</a></li>
      </ul>
    </li>
    <li><a href="#useful-links">Useful Links</a></li>
  </ul>
</nav>
    </nav>
  </div>
  
  <form method="dialog" class="modal-backdrop bg-black/50">
    <button>close</button>
  </form>
</dialog>



            
<footer class="flex justify-between items-center gap-2 px-4 py-12" id="site-footer">

  <div>
  
  <p>
    ¬© 2025 - 2026 0x69.ru
  </p>
  

  
  <p>Powered by ‚ù§Ô∏è</p>
  
</div>
  <div
  x-data="{ icons: [
    { name: 'moon', status: 'y' },
    { name: 'sunny', status: 'n' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>
          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
      
    <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
        <article class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30">
            <div class="card-body">
                <div class="card-title">Readme.md</div>

                <div class="prose dark:prose-invert">
                    <h1 id="whoami-">whoami üë®‚Äçüíª</h1>
<pre><code class="language-bash">$ cat /etc/profile
</code></pre>
<p><strong>Username:</strong> Rianvy<br>
<strong>Real name:</strong> Maksim Alexandrov<br>
<strong>Age:</strong> 28<br>
<strong>Location:</strong> Tula, RU<br>
<strong>Role:</strong> Senior Developer &amp; UI/UX Designer üòé</p>
<h2 id="about">About</h2>
<p>This blog is my personal knowledge base, where I push notes about my tech stack, life experience, and everything that triggers my interest <code>=&gt;</code> üöÄ</p>
<h2 id="contact">Contact</h2>
<p>Open for collaboration ü§ù ‚Äî ready to merge ideas and work on joint projects.</p>

                </div>
            </div>
        </article>
    </div>
    
    <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
        <article class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30">
            <div class="card-body">
                <div class="card-title">Stack</div>

                <div class="prose dark:prose-invert">
                    <h2 id="-programming-languages">üíª Programming Languages</h2>
<ul>
<li><strong>C#</strong>, <strong>PHP</strong>, <strong>JavaScript/TypeScript</strong>, <strong>Python</strong></li>
</ul>
<h2 id="-frontend">‚öõÔ∏è Frontend</h2>
<ul>
<li><strong>React</strong> / <strong>Next.js</strong>, <strong>Vue.js</strong> / <strong>Nuxt.js</strong></li>
<li><strong>Tailwind CSS</strong> / <strong>SCSS</strong></li>
<li>Responsive layout (<strong>HTML</strong>, <strong>CSS</strong>, <strong>JS</strong>) üì±</li>
</ul>
<h2 id="-backend">üîß Backend</h2>
<ul>
<li><strong>Laravel</strong>, <strong>Node.js</strong> / <strong>Express</strong> / <strong>NestJS</strong></li>
<li><strong>REST APIs</strong></li>
</ul>
<h2 id="-databases">üóÑÔ∏è Databases</h2>
<ul>
<li><strong>MySQL</strong>, <strong>PostgreSQL</strong>, <strong>MongoDB</strong>, <strong>Redis</strong></li>
</ul>
<h2 id="-devops">üõ†Ô∏è DevOps</h2>
<ul>
<li><strong>Docker</strong>, <strong>Git</strong>, <strong>CI/CD</strong>, <strong>Linux</strong> üêß</li>
</ul>
<h2 id="-design--graphics">üé® Design &amp; Graphics</h2>
<ul>
<li><strong>Figma</strong> ‚Äî UI/UX design and prototyping</li>
<li><strong>Photoshop</strong> ‚Äî graphics and image editing</li>
<li><strong>After Effects</strong> ‚Äî motion design and animation üé¨</li>
</ul>

                </div>
            </div>
        </article>
    </div>
    
    <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
        <article class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30">
            <div class="card-body">
                <div class="card-title">My Open Source Projects üåü</div>

                <div class="prose dark:prose-invert">
                    
<div class="hidden md:block overflow-x-auto my-6 not-prose">
  <table class="table table-zebra table-sm lg:table-md w-full">
    <thead>
      
      <tr>
        
        <th 
          class="text-base-content/80"
        >
          Name
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Description
        </th>
        
      </tr>
      
    </thead>
    <tbody>
      
      <tr>
        
        <td 
          class=""
        >
          <a href="https://github.com/VKify" target="_blank">VKify</a>

        </td>
        
        <td 
          class=""
        >
          A powerful browser extension for customizing VKontakte with ad blocking, themes, privacy mode, and custom CSS
        </td>
        
      </tr>
      
    </tbody>
  </table>
</div>


<div class="md:hidden my-6 space-y-3">
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Name
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <a href="https://github.com/VKify" target="_blank">VKify</a>

        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Description
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          A powerful browser extension for customizing VKontakte with ad blocking, themes, privacy mode, and custom CSS
        </span>
      </div>
      
    </div>
  </div>
  
</div>
                </div>
            </div>
        </article>
    </div>
    
    <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
        <article class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30">
            <div class="card-body">
                <div class="card-title">My Projects üöÄ</div>

                <div class="prose dark:prose-invert">
                    
<div class="hidden md:block overflow-x-auto my-6 not-prose">
  <table class="table table-zebra table-sm lg:table-md w-full">
    <thead>
      
      <tr>
        
        <th 
          class="text-base-content/80"
        >
          Name
        </th>
        
        <th 
          class="text-base-content/80"
        >
          Description
        </th>
        
      </tr>
      
    </thead>
    <tbody>
      
      <tr>
        
        <td 
          class=""
        >
          <a href="https://t.me/greenshield_official_bot" target="_blank">GreenShield VPN</a>

        </td>
        
        <td 
          class=""
        >
          VPN service in Telegram
        </td>
        
      </tr>
      
    </tbody>
  </table>
</div>


<div class="md:hidden my-6 space-y-3">
  
  <div class="card card-compact bg-base-100 shadow border border-base-300">
    <div class="card-body !p-4">
      
      <div class="flex justify-between items-center py-1.5 ">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Name
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          <a href="https://t.me/greenshield_official_bot" target="_blank">GreenShield VPN</a>

        </span>
      </div>
      
      <div class="flex justify-between items-center py-1.5 border-t border-base-200">
        <span class="font-medium text-base-content/70 text-sm pr-2">
          Description
        </span>
        <span class="text-base-content text-sm text-right flex-1 ml-4 min-w-0 break-words">
          VPN service in Telegram
        </span>
      </div>
      
    </div>
  </div>
  
</div>
                </div>
            </div>
        </article>
    </div>
     
	 
    <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
        <article class="card card-compact bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30">
            <div class="card-body">
                <div class="card-title">Social Links</div>

                <ul class="menu menu-horizontal flex-wrap w-full px-0 [&_ion-icon]:text-lg">
  
  <li>
    <a href="mailto:blackghost.v1@gmail.com" title="Email">
      <ion-icon name="mail"></ion-icon>
    </a>
  </li>
  

  
  <li>
    <a href="https://github.com/Rianvy" target="_blank" title="GitHub">
      <ion-icon name="logo-github"></ion-icon>
    </a>
  </li>
  
  <li>
    <a href="https://www.behance.net/rianvy" target="_blank" title="Behance">
      <ion-icon name="logo-behance"></ion-icon>
    </a>
  </li>
  
  <li>
    <a href="https://instagram.com/rianvy" target="_blank" title="Instagram">
      <ion-icon name="logo-instagram"></ion-icon>
    </a>
  </li>
  
  <li>
    <a href="https://t.me/cyber_way" target="_blank" title="Telegram">
      <ion-icon name="send"></ion-icon>
    </a>
  </li>
  
</ul>

            </div>
        </article>
    </div>
     
	 
	 
	
</div>

            
			
          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme = "emerald"
  window.darkTheme = "forest"
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
    
  
  <script src="/js/grid.min.js"></script>




  

<script src="/js/main.min.js"></script>


    
<script>

function toggleFocusMode() {
  const body = document.body;
  const icon = document.getElementById('focus-mode-icon');
  const text = document.getElementById('focus-mode-text');
  
  body.classList.toggle('focus-mode');
  
  const isFocusMode = body.classList.contains('focus-mode');
  
  if (icon) {
    icon.setAttribute('name', isFocusMode ? 'eye-off-outline' : 'eye-outline');
  }
  
  if (text) {
    text.textContent = isFocusMode ? 'Exit' : 'Focus';
  }
  
  
  localStorage.setItem('focusMode', isFocusMode ? 'on' : 'off');
}

document.addEventListener('DOMContentLoaded', () => {
  
  if (localStorage.getItem('focusMode') === 'on') {
    document.body.classList.add('focus-mode');
    const icon = document.getElementById('focus-mode-icon');
    const text = document.getElementById('focus-mode-text');
    if (icon) icon.setAttribute('name', 'eye-off-outline');
    if (text) text.textContent = 'Exit';
  }

  
  const progressBar = document.getElementById('reading-progress');
  const progressText = document.getElementById('reading-progress-text');
  const article = document.getElementById('dream-single-post-main');
  
  if (progressBar && article) {
    const updateProgress = () => {
      const rect = article.getBoundingClientRect();
      const scrolled = Math.max(0, -rect.top);
      const total = rect.height - window.innerHeight;
      const progress = Math.min(100, Math.max(0, (scrolled / total) * 100));
      progressBar.style.width = `${progress}%`;
      
      if (progressText) {
        progressText.textContent = `${Math.round(progress)}%`;
        progressText.classList.toggle('visible', progress > 5 && progress < 95);
      }
    };
    
    window.addEventListener('scroll', updateProgress, { passive: true });
    updateProgress();
  }

  
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  
  const tocLinks = document.querySelectorAll('#TableOfContents a');
  const headings = document.querySelectorAll('#dream-single-post-content h1, #dream-single-post-content h2, #dream-single-post-content h3');
  
  if (tocLinks.length && headings.length) {
    const tocObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          tocLinks.forEach(link => link.classList.remove('active'));
          const activeLink = document.querySelector(`#TableOfContents a[href="#${entry.target.id}"]`);
          activeLink?.classList.add('active');
        }
      });
    }, { rootMargin: '-20% 0% -60% 0%' });
    
    headings.forEach(h => tocObserver.observe(h));
  }
});
</script>









<script
  src="https://cdn.jsdelivr.net/npm/luxon@1.26.0"
  integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0="
  crossorigin="anonymous"
></script>
<script>
  format()

  function format() {
    document.querySelectorAll('span[data-format="luxon"]').forEach(el => {
      const date = el.textContent

      el.textContent = luxon.DateTime.fromISO(date, { locale: "en" }).toFormat("dd.MM.yyyy, HH:mm")
    })
  }
</script>





<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://unpkg.com/highlightjs-copy/dist/highlightjs-copy.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/apache.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script><script>
  hljs.highlightAll();
  hljs.addPlugin(new CopyButtonPlugin());

  document.addEventListener('alpine:initialized', () => {
    window.customSyntaxHighlighting = {
      dark: 'a11y-dark',
      light: 'atom-one-dark'
    };

    const updateSyntaxTheme = () => {
      try {
        const isDark = Alpine.store('darkMode').isDark();
        const currentTheme = isDark ? 
          window.customSyntaxHighlighting.dark : 
          window.customSyntaxHighlighting.light;

        let link = document.querySelector('link[data-syntax-highlight]');
        if (link) {
          const currentHref = link.href;
          const updatedHref = currentHref.replace(/styles\/[^/]+\.min\.css/, `styles/${currentTheme}.min.css`);
          link.href = updatedHref;
        }
      } catch (error) {
        console.warn('Error updating syntax theme:', error);
      }
    };

    updateSyntaxTheme();
    Alpine.effect(() => {
      updateSyntaxTheme();
    });
  });
</script>







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lightgallery.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-zoom.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-fullscreen.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/css/lg-thumbnail.min.css">


<style>
   
  .lg-backdrop {
    background-color: rgba(0, 0, 0, 0.95) !important;
  }
  
   
  .lg-sub-html {
    background: linear-gradient(transparent, rgba(0,0,0,0.8)) !important;
    padding: 20px 40px !important;
    text-align: left !important;
  }
  
  .lg-sub-html h1 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #fff;
  }
  
  .lg-sub-html h2 {
    font-size: 1rem;
    font-weight: 400;
    color: rgba(255,255,255,0.8);
  }
  
  .lg-sub-html .project-meta {
    display: flex;
    gap: 1rem;
    margin-top: 0.75rem;
    font-size: 0.875rem;
    color: rgba(255,255,255,0.6);
  }
  
  .lg-sub-html .project-link {
    color: #60a5fa;
    text-decoration: none;
    transition: color 0.2s;
  }
  
  .lg-sub-html .project-link:hover {
    color: #93c5fd;
  }
  
   
  .lg-item img {
    transition: transform 0.3s ease;
  }
  
   
  .lg-progress-bar {
    background-color: #3b82f6 !important;
    height: 3px !important;
  }
  
   
  .lg-thumb-item {
    border-radius: 4px;
    opacity: 0.6;
    transition: opacity 0.2s, transform 0.2s;
  }
  
  .lg-thumb-item.active,
  .lg-thumb-item:hover {
    opacity: 1;
    transform: scale(1.05);
  }
  
   
  .lg-toolbar .lg-icon {
    font-size: 1.5rem;
  }
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/lightgallery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/zoom/lg-zoom.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/fullscreen/lg-fullscreen.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const galleryContainer = document.querySelector("#dream-single-post-content");
  const images = galleryContainer?.querySelectorAll("img");

  if (!galleryContainer || !images?.length) return;

  
  galleryContainer.querySelectorAll("a.lg-item").forEach(el => el.remove());

  images.forEach((img, index) => {
    if (img.closest('[data-tc-exclude]')) return;
    if (img.closest("a.lg-item")) return;

    const wrapper = document.createElement("a");
    wrapper.href = img.src;
    wrapper.classList.add("lg-item", "not-prose");
    
    
    wrapper.style.cursor = "zoom-in";

    
    const alt = img.alt || "";
    const title = img.title || "";
    
    
    const projectUrl = img.dataset.projectUrl || "";
    const projectYear = img.dataset.year || "";
    const projectTech = img.dataset.tech || "";

    let subHtml = "";
    
    if (alt) {
      subHtml += `<h1>${alt}</h1>`;
    }
    
    if (title) {
      subHtml += `<h2>${title}</h2>`;
    }
    
    
    if (projectUrl || projectYear || projectTech) {
      subHtml += `<div class="project-meta">`;
      
      if (projectYear) {
        subHtml += `<span>üìÖ ${projectYear}</span>`;
      }
      
      if (projectTech) {
        subHtml += `<span>üõ†Ô∏è ${projectTech}</span>`;
      }
      
      if (projectUrl) {
        subHtml += `<a href="${projectUrl}" target="_blank" rel="noopener" class="project-link">üîó –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç</a>`;
      }
      
      subHtml += `</div>`;
    }

    wrapper.dataset.subHtml = subHtml;
    
    
    wrapper.dataset.src = img.src;
    
    
    if (img.dataset.srcLarge) {
      wrapper.dataset.src = img.dataset.srcLarge;
    }

    img.parentNode.insertBefore(wrapper, img);
    wrapper.appendChild(img);
  });

  
  const gallery = lightGallery(galleryContainer, {
    selector: "a.lg-item",
    plugins: [lgZoom, lgFullscreen, lgThumbnail],
    
    
    speed: 400,
    backdropDuration: 300,
    startAnimationDuration: 400,
    endAnimationDuration: 300,
    
    
    loop: true,
    slideShowAutoplay: false,
    slideShowInterval: 4000,
    mousewheel: true,
    hideScrollbar: true,
    
    
    closeOnTap: true,
    closable: true,
    escKey: true,
    
    
    counter: true,
    download: false,
    getCaptionFromTitleOrAlt: false,
    subHtmlSelectorRelative: true,
    
    
    mobileSettings: {
      controls: true,
      showCloseIcon: true,
      download: false
    },
    
    
    swipeThreshold: 50,
    enableSwipe: true,
    enableDrag: true,
    
    
    zoomFromOrigin: true,
    actualSize: true,
    showZoomInOutIcons: true,
    actualSizeIcons: {
      zoomIn: "lg-zoom-in",
      zoomOut: "lg-zoom-out"
    },
    scale: 1,
    zoom: true,
    
    
    thumbnail: true,
    thumbWidth: 100,
    thumbHeight: "80px",
    thumbMargin: 5,
    toggleThumb: true,
    animateThumb: true,
    
    
    fullScreen: true,
    
    
    preload: 2,
    
    
    ariaLabelledby: "lg-slide-title",
    ariaDescribedby: "lg-slide-desc"
  });

  
  
  
  galleryContainer.addEventListener("lgAfterOpen", () => {
    console.log("Gallery opened");
    
  });

  
  galleryContainer.addEventListener("lgAfterSlide", (event) => {
    const { index } = event.detail;
    console.log(`Viewing slide ${index + 1}`);
  });

  
  document.addEventListener("keydown", (e) => {
    if (!document.querySelector(".lg-container")) return;
    
    if (e.key === "+" || e.key === "=") {
      gallery.zoomIn();
    } else if (e.key === "-") {
      gallery.zoomOut();
    }
  });
});
</script>




    

    

    
    <script src="/js/custom.js"></script>
    

    
	
    

    <script type="module" src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.4.0/dist/ionicons/ionicons.js"></script>
  </body>
</html>