{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* ЕДИНЫЕ КЛАССЫ (синхронизированы с header.html и renderMobileNavItem)    */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{- $navBtnClass := "group inline-flex items-center justify-center w-10 h-10 rounded-xl cursor-pointer transition-all duration-200 hover:bg-primary hover:shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95" -}}
{{- $navIconClass := "text-xl transition-colors duration-200 group-hover:text-primary-content" -}}
{{- $navLinkClass := "px-3 py-2 text-sm font-medium rounded-lg cursor-pointer transition-all duration-200 hover:bg-base-200 hover:text-primary focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 active:scale-95" -}}

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* SEARCH                                                                   */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ if and (eq . "search") (gt (len (where site.Pages "Type" "search")) 0) }}
<a href="{{ "search" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="{{ T "search" }}"
   aria-label="{{ T "search" }}">
  <ion-icon name="search-outline" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* RSS                                                                      */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else if and (eq . "rss") site.Params.rss }}
<a href="{{ "index.xml" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="RSS"
   aria-label="RSS Feed"
   target="_blank"
   rel="noopener noreferrer">
  <ion-icon name="logo-rss" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* POSTS / ARCHIVES                                                         */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else if and (eq . "posts") (gt (len (where site.RegularPages "Type" "posts")) 0) }}
<a href="{{ "posts" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="{{ T "archives" }}"
   aria-label="{{ T "archives" }}">
  <ion-icon name="library-outline" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* PORTFOLIO                                                                */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else if and (eq . "portfolio") (site.Params.portfolio) (gt (len (where site.RegularPages "Type" "portfolio")) 0) }}
<a href="{{ "portfolio" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="{{ i18n "portfolio.title" }}"
   aria-label="{{ i18n "portfolio.title" }}">
  <ion-icon name="briefcase-outline" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* UTILITIES                                                                */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else if and (eq . "utilities") (site.Params.utilities) (gt (len (where site.RegularPages "Type" "utilities")) 0) }}
<a href="{{ "utilities" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="{{ i18n "utilities.title" | default "Utilities" }}"
   aria-label="{{ i18n "utilities.title" | default "Utilities" }}">
  <ion-icon name="grid-outline" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* CATEGORIES                                                               */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else if and (eq . "categories") site.Taxonomies.categories }}
<a href="{{ "categories" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="{{ T "allCategories" }}"
   aria-label="{{ T "allCategories" }}">
  <ion-icon name="folder-outline" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* TAGS                                                                     */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else if and (eq . "tags") site.Taxonomies.tags }}
<a href="{{ "tags" | relLangURL }}" 
   class="{{ $navBtnClass }}"
   title="{{ T "allTags" }}"
   aria-label="{{ T "allTags" }}">
  <ion-icon name="pricetags-outline" class="{{ $navIconClass }}"></ion-icon>
</a>

{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{/* CUSTOM NAV ITEMS                                                         */}}
{{/* ═══════════════════════════════════════════════════════════════════════ */}}
{{ else }}
  {{- $navItems := site.Params.navItems -}}
  {{- $item := index $navItems . -}}
  {{ with $item }}
    {{- $isExternal := eq .target "_blank" -}}
    
    {{ if .icon }}
    {{/* Кнопка-иконка */}}
    <a href="{{ .href }}" 
       class="{{ $navBtnClass }}"
       title="{{ .title }}"
       aria-label="{{ .title }}"
       {{ with .target }}target="{{ . }}"{{ end }}
       {{ if $isExternal }}rel="noopener noreferrer"{{ end }}>
      <ion-icon name="{{ .icon }}" class="{{ $navIconClass }}"></ion-icon>
    </a>
    
    {{ else if .title }}
    {{/* Текстовая ссылка */}}
    <a href="{{ .href }}" 
       class="{{ $navLinkClass }}"
       title="{{ .title }}"
       {{ with .target }}target="{{ . }}"{{ end }}
       {{ if $isExternal }}rel="noopener noreferrer"{{ end }}>
      <span>{{ .title }}</span>
      {{ if $isExternal }}
      <ion-icon name="open-outline" class="inline-block ml-1 text-xs opacity-50"></ion-icon>
      {{ end }}
    </a>
    {{ end }}
    
  {{ end }}
{{ end }}