{{ define "title" }}
{{ .Title }}
{{ end }}

{{ define "main" }}

<div class="max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-10">

  <!-- Hero -->
  <div class="text-center mb-8">
    <div class="inline-flex items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-2xl bg-primary/10 text-primary mb-4">
      <span class="text-4xl sm:text-5xl">üé≤</span>
    </div>
    <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-3">{{ .Title }}</h1>
    <p class="text-base-content/60 max-w-2xl mx-auto mb-4">{{ .Description }}</p>
    
    <div class="flex flex-wrap justify-center gap-2">
      <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-success/10 text-success border border-success/20">
        <ion-icon name="shield-checkmark-outline"></ion-icon>
        {{ i18n "uuidGenerator.inBrowser" | default "100% –≤ –±—Ä–∞—É–∑–µ—Ä–µ" }}
      </span>
      <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary border border-primary/20">
        <ion-icon name="flash-outline"></ion-icon>
        {{ i18n "uuidGenerator.instant" | default "–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è" }}
      </span>
      <span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium bg-secondary/10 text-secondary border border-secondary/20">
        <ion-icon name="layers-outline"></ion-icon>
        {{ i18n "uuidGenerator.bulkSupport" | default "Bulk –¥–æ 10 000" }}
      </span>
    </div>
  </div>

  <!-- Main Content -->
  <div class="max-w-6xl mx-auto">
    
    <!-- Tabs -->
    <div class="tabs tabs-boxed bg-base-200 p-1 rounded-2xl mb-6 overflow-x-auto flex-nowrap">
      <button class="tab tab-active flex-1 sm:flex-none whitespace-nowrap" data-tab="uuid">
        <ion-icon name="finger-print-outline" class="text-lg mr-1"></ion-icon>
        UUID v4
      </button>
      <button class="tab flex-1 sm:flex-none whitespace-nowrap" data-tab="nanoid">
        <ion-icon name="barcode-outline" class="text-lg mr-1"></ion-icon>
        nanoid
      </button>
      <button class="tab flex-1 sm:flex-none whitespace-nowrap" data-tab="random">
        <ion-icon name="text-outline" class="text-lg mr-1"></ion-icon>
        {{ i18n "uuidGenerator.randomString" | default "Random String" }}
      </button>
      <button class="tab flex-1 sm:flex-none whitespace-nowrap" data-tab="password">
        <ion-icon name="key-outline" class="text-lg mr-1"></ion-icon>
        {{ i18n "uuidGenerator.password" | default "Password" }}
      </button>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      
      <!-- Left Panel: Settings -->
      <div class="lg:col-span-1">
        
        <!-- UUID Settings -->
        <div id="settings-uuid" class="bg-base-100 rounded-2xl border border-base-200 dark:border-base-content/10 shadow-xl overflow-hidden">
          <div class="p-4 bg-base-200/30 border-b border-base-200 dark:border-base-content/10">
            <h2 class="font-semibold flex items-center gap-2">
              <ion-icon name="settings-outline" class="text-primary"></ion-icon>
              {{ i18n "uuidGenerator.settings" | default "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" }}
            </h2>
          </div>
          
          <div class="p-4 space-y-4">
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.format" | default "–§–æ—Ä–º–∞—Ç" }}</span>
              </label>
              <select id="uuid-format" class="select select-bordered select-sm">
                <option value="default">xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx</option>
                <option value="uppercase">XXXXXXXX-XXXX-4XXX-YXXX-XXXXXXXXXXXX</option>
                <option value="no-dash">xxxxxxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx</option>
                <option value="braces">{xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx}</option>
              </select>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.quantity" | default "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" }}</span>
              </label>
              <input type="number" id="uuid-count" class="input input-bordered input-sm" value="1" min="1" max="10000" />
            </div>
            
            <button id="uuid-generate" class="btn btn-primary btn-sm w-full gap-2">
              <ion-icon name="flash-outline"></ion-icon>
              {{ i18n "uuidGenerator.generate" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" }}
            </button>
            
          </div>
        </div>

        <!-- nanoid Settings -->
        <div id="settings-nanoid" class="hidden bg-base-100 rounded-2xl border border-base-200 dark:border-base-content/10 shadow-xl overflow-hidden">
          <div class="p-4 bg-base-200/30 border-b border-base-200 dark:border-base-content/10">
            <h2 class="font-semibold flex items-center gap-2">
              <ion-icon name="settings-outline" class="text-primary"></ion-icon>
              {{ i18n "uuidGenerator.settings" | default "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" }}
            </h2>
          </div>
          
          <div class="p-4 space-y-4">
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.length" | default "–î–ª–∏–Ω–∞" }}</span>
              </label>
              <input type="number" id="nanoid-length" class="input input-bordered input-sm" value="21" min="1" max="128" />
              <label class="label">
                <span class="label-text-alt text-base-content/60">{{ i18n "uuidGenerator.defaultIs" | default "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:" }} 21</span>
              </label>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.alphabet" | default "–ê–ª—Ñ–∞–≤–∏—Ç" }}</span>
              </label>
              <select id="nanoid-preset" class="select select-bordered select-sm mb-2">
                <option value="default">{{ i18n "uuidGenerator.default" | default "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é" }} (A-Za-z0-9_-)</option>
                <option value="numbers">{{ i18n "uuidGenerator.numbersOnly" | default "–¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã" }} (0-9)</option>
                <option value="lowercase">{{ i18n "uuidGenerator.lowercase" | default "Lowercase" }} (a-z0-9)</option>
                <option value="uppercase">{{ i18n "uuidGenerator.uppercase" | default "Uppercase" }} (A-Z0-9)</option>
                <option value="hex">{{ i18n "uuidGenerator.hex" | default "Hex" }} (0-9a-f)</option>
                <option value="custom">{{ i18n "uuidGenerator.custom" | default "–ö–∞—Å—Ç–æ–º–Ω—ã–π" }}</option>
              </select>
              <input type="text" id="nanoid-alphabet" class="input input-bordered input-sm font-mono hidden" placeholder="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-" />
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.quantity" | default "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" }}</span>
              </label>
              <input type="number" id="nanoid-count" class="input input-bordered input-sm" value="1" min="1" max="10000" />
            </div>
            
            <button id="nanoid-generate" class="btn btn-primary btn-sm w-full gap-2">
              <ion-icon name="flash-outline"></ion-icon>
              {{ i18n "uuidGenerator.generate" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" }}
            </button>
            
          </div>
        </div>

        <!-- Random String Settings -->
        <div id="settings-random" class="hidden bg-base-100 rounded-2xl border border-base-200 dark:border-base-content/10 shadow-xl overflow-hidden">
          <div class="p-4 bg-base-200/30 border-b border-base-200 dark:border-base-content/10">
            <h2 class="font-semibold flex items-center gap-2">
              <ion-icon name="settings-outline" class="text-primary"></ion-icon>
              {{ i18n "uuidGenerator.settings" | default "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" }}
            </h2>
          </div>
          
          <div class="p-4 space-y-4">
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.length" | default "–î–ª–∏–Ω–∞" }}</span>
              </label>
              <input type="number" id="random-length" class="input input-bordered input-sm" value="16" min="1" max="256" />
            </div>
            
            <div class="space-y-2">
              <label class="label py-1">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.characters" | default "–°–∏–º–≤–æ–ª—ã" }}</span>
              </label>
              
              <label class="flex items-center justify-between cursor-pointer">
                <span class="text-sm">{{ i18n "uuidGenerator.lowercase" | default "Lowercase" }} (a-z)</span>
                <input type="checkbox" id="random-lowercase" class="toggle toggle-sm toggle-primary" checked />
              </label>
              
              <label class="flex items-center justify-between cursor-pointer">
                <span class="text-sm">{{ i18n "uuidGenerator.uppercase" | default "Uppercase" }} (A-Z)</span>
                <input type="checkbox" id="random-uppercase" class="toggle toggle-sm toggle-primary" checked />
              </label>
              
              <label class="flex items-center justify-between cursor-pointer">
                <span class="text-sm">{{ i18n "uuidGenerator.numbers" | default "–¶–∏—Ñ—Ä—ã" }} (0-9)</span>
                <input type="checkbox" id="random-numbers" class="toggle toggle-sm toggle-primary" checked />
              </label>
              
              <label class="flex items-center justify-between cursor-pointer">
                <span class="text-sm">{{ i18n "uuidGenerator.symbols" | default "–°–∏–º–≤–æ–ª—ã" }} (!@#$%)</span>
                <input type="checkbox" id="random-symbols" class="toggle toggle-sm toggle-primary" />
              </label>
              
              <label class="flex items-center justify-between cursor-pointer">
                <span class="text-sm">{{ i18n "uuidGenerator.excludeSimilar" | default "–ò—Å–∫–ª—é—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ" }} (0Ol1)</span>
                <input type="checkbox" id="random-exclude-similar" class="toggle toggle-sm toggle-primary" />
              </label>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.quantity" | default "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" }}</span>
              </label>
              <input type="number" id="random-count" class="input input-bordered input-sm" value="1" min="1" max="10000" />
            </div>
            
            <button id="random-generate" class="btn btn-primary btn-sm w-full gap-2">
              <ion-icon name="flash-outline"></ion-icon>
              {{ i18n "uuidGenerator.generate" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" }}
            </button>
            
          </div>
        </div>

        <!-- Password Settings -->
        <div id="settings-password" class="hidden bg-base-100 rounded-2xl border border-base-200 dark:border-base-content/10 shadow-xl overflow-hidden">
          <div class="p-4 bg-base-200/30 border-b border-base-200 dark:border-base-content/10">
            <h2 class="font-semibold flex items-center gap-2">
              <ion-icon name="settings-outline" class="text-primary"></ion-icon>
              {{ i18n "uuidGenerator.settings" | default "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" }}
            </h2>
          </div>
          
          <div class="p-4 space-y-4">
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.length" | default "–î–ª–∏–Ω–∞" }}</span>
              </label>
              <input type="range" id="password-length" class="range range-primary range-sm" min="6" max="128" value="16" />
              <div class="flex justify-between text-xs text-base-content/40 mt-1">
                <span>6</span>
                <span id="password-length-value" class="text-base-content font-medium">16</span>
                <span>128</span>
              </div>
            </div>
            
            <div>
              <label class="label py-1">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.complexity" | default "–£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏" }}</span>
              </label>
              <div class="space-y-2">
                <label class="flex items-center gap-3 p-2 rounded-lg bg-base-200/50 cursor-pointer hover:bg-base-200 transition-colors has-[:checked]:ring-2 has-[:checked]:ring-primary">
                  <input type="radio" name="password-level" value="simple" class="radio radio-sm radio-primary" />
                  <div class="flex-1">
                    <span class="text-sm font-medium">{{ i18n "uuidGenerator.simple" | default "Simple" }}</span>
                  </div>
                  <span class="badge badge-success badge-sm">a-z, A-Z, 0-9</span>
                </label>
                <label class="flex items-center gap-3 p-2 rounded-lg bg-base-200/50 cursor-pointer hover:bg-base-200 transition-colors has-[:checked]:ring-2 has-[:checked]:ring-primary">
                  <input type="radio" name="password-level" value="strong" class="radio radio-sm radio-primary" checked />
                  <div class="flex-1">
                    <span class="text-sm font-medium">{{ i18n "uuidGenerator.strong" | default "Strong" }}</span>
                  </div>
                  <span class="badge badge-warning badge-sm">+ !@#$%</span>
                </label>
                <label class="flex items-center gap-3 p-2 rounded-lg bg-base-200/50 cursor-pointer hover:bg-base-200 transition-colors has-[:checked]:ring-2 has-[:checked]:ring-primary">
                  <input type="radio" name="password-level" value="ultra" class="radio radio-sm radio-primary" />
                  <div class="flex-1">
                    <span class="text-sm font-medium">{{ i18n "uuidGenerator.ultra" | default "Ultra" }}</span>
                  </div>
                  <span class="badge badge-error badge-sm">+ ^&*()_+=</span>
                </label>
              </div>
            </div>
            
            <div class="space-y-2">
              <label class="flex items-center justify-between cursor-pointer">
                <span class="text-sm">{{ i18n "uuidGenerator.excludeSimilar" | default "–ò—Å–∫–ª—é—á–∏—Ç—å –ø–æ—Ö–æ–∂–∏–µ" }}</span>
                <input type="checkbox" id="password-exclude-similar" class="toggle toggle-sm toggle-primary" />
              </label>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text font-medium">{{ i18n "uuidGenerator.quantity" | default "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" }}</span>
              </label>
              <input type="number" id="password-count" class="input input-bordered input-sm" value="1" min="1" max="10000" />
            </div>
            
            <button id="password-generate" class="btn btn-primary btn-sm w-full gap-2">
              <ion-icon name="flash-outline"></ion-icon>
              {{ i18n "uuidGenerator.generate" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å" }}
            </button>
            
          </div>
        </div>

      </div>

      <!-- Right Panel: Results -->
      <div class="lg:col-span-2">
        
        <div class="bg-base-100 rounded-2xl border border-base-200 dark:border-base-content/10 shadow-xl overflow-hidden">
          
          <!-- Header -->
          <div class="p-4 bg-base-200/30 border-b border-base-200 dark:border-base-content/10 flex items-center justify-between">
            <h2 class="font-semibold flex items-center gap-2">
              <ion-icon name="list-outline" class="text-success"></ion-icon>
              {{ i18n "uuidGenerator.results" | default "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã" }}
              <span class="badge badge-sm" id="results-count">0</span>
            </h2>
            <div class="flex items-center gap-2">
              <button id="copy-all" class="btn btn-ghost btn-xs gap-1" disabled>
                <ion-icon name="copy-outline"></ion-icon>
                {{ i18n "uuidGenerator.copyAll" | default "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë" }}
              </button>
              <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-xs gap-1">
                  <ion-icon name="download-outline"></ion-icon>
                  {{ i18n "uuidGenerator.download" | default "–°–∫–∞—á–∞—Ç—å" }}
                </label>
                <ul tabindex="0" class="dropdown-content menu p-2 shadow-lg bg-base-100 rounded-box w-40 border border-base-200">
                  <li><a id="download-txt"><ion-icon name="document-text-outline"></ion-icon> .txt</a></li>
                  <li><a id="download-json"><ion-icon name="code-outline"></ion-icon> .json</a></li>
                  <li><a id="download-csv"><ion-icon name="grid-outline"></ion-icon> .csv</a></li>
                </ul>
              </div>
            </div>
          </div>
          
          <!-- Single Result (for count = 1) -->
          <div id="single-result" class="p-6">
            <div class="flex items-center gap-4">
              <div class="flex-1">
                <div class="font-mono text-lg sm:text-xl break-all select-all p-4 bg-base-200/50 rounded-xl" id="single-value">‚Äî</div>
              </div>
              <button id="copy-single" class="btn btn-primary btn-lg gap-2">
                <ion-icon name="copy-outline" class="text-xl"></ion-icon>
                {{ i18n "uuidGenerator.copy" | default "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å" }}
              </button>
            </div>
            
            <!-- Password Strength (only for password) -->
            <div id="password-strength" class="hidden mt-6">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium">{{ i18n "uuidGenerator.strength" | default "–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è" }}</span>
                <span class="text-sm font-semibold" id="strength-label">‚Äî</span>
              </div>
              <div class="w-full bg-base-200 rounded-full h-2">
                <div id="strength-bar" class="h-2 rounded-full transition-all" style="width: 0%"></div>
              </div>
              <div class="mt-3 grid grid-cols-2 gap-2 text-xs text-base-content/60">
                <div>{{ i18n "uuidGenerator.entropy" | default "–≠–Ω—Ç—Ä–æ–ø–∏—è:" }} <span id="entropy-value" class="font-mono">‚Äî</span> {{ i18n "uuidGenerator.bits" | default "–±–∏—Ç" }}</div>
                <div>{{ i18n "uuidGenerator.combinations" | default "–ö–æ–º–±–∏–Ω–∞—Ü–∏–π:" }} <span id="combinations-value" class="font-mono">‚Äî</span></div>
              </div>
            </div>
          </div>
          
          <!-- Bulk Results (for count > 1) -->
          <div id="bulk-results" class="hidden p-4">
            <textarea 
              id="bulk-output" 
              class="textarea textarea-bordered w-full h-96 font-mono text-sm leading-relaxed bg-base-200/30"
              readonly
              placeholder="{{ i18n "uuidGenerator.resultsWillAppear" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å..." }}"
            ></textarea>
          </div>
          
        </div>

        <!-- Statistics -->
        <div id="stats-panel" class="hidden mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3">
          <div class="p-3 rounded-xl bg-base-100 border border-base-200 dark:border-base-content/10 text-center">
            <div class="text-xl font-bold text-primary" id="stat-total">0</div>
            <div class="text-xs text-base-content/60">{{ i18n "uuidGenerator.generated" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ" }}</div>
          </div>
          <div class="p-3 rounded-xl bg-base-100 border border-base-200 dark:border-base-content/10 text-center">
            <div class="text-xl font-bold text-secondary" id="stat-length">0</div>
            <div class="text-xs text-base-content/60">{{ i18n "uuidGenerator.avgLength" | default "–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞" }}</div>
          </div>
          <div class="p-3 rounded-xl bg-base-100 border border-base-200 dark:border-base-content/10 text-center">
            <div class="text-xl font-bold text-accent" id="stat-unique">0</div>
            <div class="text-xs text-base-content/60">{{ i18n "uuidGenerator.unique" | default "–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö" }}</div>
          </div>
          <div class="p-3 rounded-xl bg-base-100 border border-base-200 dark:border-base-content/10 text-center">
            <div class="text-xl font-bold text-success" id="stat-time">0ms</div>
            <div class="text-xs text-base-content/60">{{ i18n "uuidGenerator.time" | default "–í—Ä–µ–º—è" }}</div>
          </div>
        </div>

      </div>
      
    </div>

    <!-- Info Cards -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-4 gap-4">
      
      <div class="p-4 rounded-2xl bg-base-100 border border-base-200 dark:border-base-content/10">
        <div class="w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center mb-3">
          <ion-icon name="finger-print-outline" class="text-2xl text-primary"></ion-icon>
        </div>
        <h3 class="font-semibold mb-1">UUID v4</h3>
        <p class="text-sm text-base-content/60">{{ i18n "uuidGenerator.uuidDesc" | default "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä. RFC 4122 —Å—Ç–∞–Ω–¥–∞—Ä—Ç." }}</p>
      </div>
      
      <div class="p-4 rounded-2xl bg-base-100 border border-base-200 dark:border-base-content/10">
        <div class="w-12 h-12 rounded-xl bg-secondary/10 flex items-center justify-center mb-3">
          <ion-icon name="barcode-outline" class="text-2xl text-secondary"></ion-icon>
        </div>
        <h3 class="font-semibold mb-1">nanoid</h3>
        <p class="text-sm text-base-content/60">{{ i18n "uuidGenerator.nanoidDesc" | default "–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π URL-friendly –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä. –ö–æ—Ä–æ—á–µ UUID –Ω–∞ 40%." }}</p>
      </div>
      
      <div class="p-4 rounded-2xl bg-base-100 border border-base-200 dark:border-base-content/10">
        <div class="w-12 h-12 rounded-xl bg-accent/10 flex items-center justify-center mb-3">
          <ion-icon name="text-outline" class="text-2xl text-accent"></ion-icon>
        </div>
        <h3 class="font-semibold mb-1">{{ i18n "uuidGenerator.randomString" | default "Random String" }}</h3>
        <p class="text-sm text-base-content/60">{{ i18n "uuidGenerator.randomStringDesc" | default "–°–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –Ω–∞–±–æ—Ä–æ–º —Å–∏–º–≤–æ–ª–æ–≤." }}</p>
      </div>
      
      <div class="p-4 rounded-2xl bg-base-100 border border-base-200 dark:border-base-content/10">
        <div class="w-12 h-12 rounded-xl bg-success/10 flex items-center justify-center mb-3">
          <ion-icon name="key-outline" class="text-2xl text-success"></ion-icon>
        </div>
        <h3 class="font-semibold mb-1">{{ i18n "uuidGenerator.password" | default "Password" }}</h3>
        <p class="text-sm text-base-content/60">{{ i18n "uuidGenerator.passwordDesc" | default "–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–π –ø–∞—Ä–æ–ª—å —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏." }}</p>
      </div>
      
    </div>

  </div>

</div>

<!-- Toast for copy notifications -->
<div id="toast" class="toast toast-top toast-center hidden">
  <div class="alert alert-success">
    <ion-icon name="checkmark-circle-outline" class="text-xl"></ion-icon>
    <span id="toast-message">{{ i18n "uuidGenerator.copied" | default "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!" }}</span>
  </div>
</div>

<script>
(function() {
  'use strict';
  
  // ========== I18N ==========
  const i18n = {
    copied: {{ i18n "uuidGenerator.copied" | default "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!" | jsonify }},
    copiedCount: {{ i18n "uuidGenerator.copiedCount" | default "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ {count} –∑–Ω–∞—á–µ–Ω–∏–π" | jsonify }},
    weak: {{ i18n "uuidGenerator.weak" | default "–°–ª–∞–±—ã–π" | jsonify }},
    medium: {{ i18n "uuidGenerator.medium" | default "–°—Ä–µ–¥–Ω–∏–π" | jsonify }},
    strong: {{ i18n "uuidGenerator.strong" | default "–°–∏–ª—å–Ω—ã–π" | jsonify }},
    veryStrong: {{ i18n "uuidGenerator.veryStrong" | default "–û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π" | jsonify }},
    generated: {{ i18n "uuidGenerator.generated" | default "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ" | jsonify }},
  };
  
  // ========== STATE ==========
  let currentTab = 'uuid';
  let currentResults = [];
  let settings = {
    uuid: { format: 'default', count: 1 },
    nanoid: { length: 21, alphabet: 'default', count: 1 },
    random: { length: 16, lowercase: true, uppercase: true, numbers: true, symbols: false, excludeSimilar: false, count: 1 },
    password: { length: 16, level: 'strong', excludeSimilar: false, count: 1 }
  };
  
  // ========== ELEMENTS ==========
  const tabs = document.querySelectorAll('[data-tab]');
  const singleResult = document.getElementById('single-result');
  const bulkResults = document.getElementById('bulk-results');
  const singleValue = document.getElementById('single-value');
  const bulkOutput = document.getElementById('bulk-output');
  const resultsCount = document.getElementById('results-count');
  const statsPanel = document.getElementById('stats-panel');
  const passwordStrength = document.getElementById('password-strength');
  const toast = document.getElementById('toast');
  const toastMessage = document.getElementById('toast-message');
  
  // ========== CRYPTO UTILITIES ==========
  
  function getRandomValues(length) {
    const array = new Uint8Array(length);
    crypto.getRandomValues(array);
    return array;
  }
  
  function randomInt(max) {
    const array = getRandomValues(4);
    const num = (array[0] << 24) | (array[1] << 16) | (array[2] << 8) | array[3];
    return Math.abs(num) % max;
  }
  
  // ========== UUID v4 ==========
  
  function generateUUID() {
    const bytes = getRandomValues(16);
    bytes[6] = (bytes[6] & 0x0f) | 0x40;
    bytes[8] = (bytes[8] & 0x3f) | 0x80;
    
    const hex = Array.from(bytes).map(b => b.toString(16).padStart(2, '0')).join('');
    return `${hex.substr(0,8)}-${hex.substr(8,4)}-${hex.substr(12,4)}-${hex.substr(16,4)}-${hex.substr(20,12)}`;
  }
  
  function formatUUID(uuid, format) {
    switch (format) {
      case 'uppercase':
        return uuid.toUpperCase();
      case 'no-dash':
        return uuid.replace(/-/g, '');
      case 'braces':
        return '{' + uuid + '}';
      default:
        return uuid;
    }
  }
  
  // ========== NANOID ==========
  
  const NANOID_ALPHABETS = {
    default: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-',
    numbers: '0123456789',
    lowercase: 'abcdefghijklmnopqrstuvwxyz0123456789',
    uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789',
    hex: '0123456789abcdef',
  };
  
  function generateNanoid(length, alphabet) {
    let result = '';
    for (let i = 0; i < length; i++) {
      result += alphabet[randomInt(alphabet.length)];
    }
    return result;
  }
  
  // ========== RANDOM STRING ==========
  
  const CHAR_SETS = {
    lowercase: 'abcdefghijklmnopqrstuvwxyz',
    uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
    numbers: '0123456789',
    symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?',
  };
  
  const SIMILAR_CHARS = '0Oo1lI';
  
  function generateRandomString(length, options) {
    let charset = '';
    if (options.lowercase) charset += CHAR_SETS.lowercase;
    if (options.uppercase) charset += CHAR_SETS.uppercase;
    if (options.numbers) charset += CHAR_SETS.numbers;
    if (options.symbols) charset += CHAR_SETS.symbols;
    
    if (options.excludeSimilar) {
      charset = charset.split('').filter(c => !SIMILAR_CHARS.includes(c)).join('');
    }
    
    if (!charset) return '';
    
    let result = '';
    for (let i = 0; i < length; i++) {
      result += charset[randomInt(charset.length)];
    }
    return result;
  }
  
  // ========== PASSWORD ==========
  
  const PASSWORD_SETS = {
    simple: CHAR_SETS.lowercase + CHAR_SETS.uppercase + CHAR_SETS.numbers,
    strong: CHAR_SETS.lowercase + CHAR_SETS.uppercase + CHAR_SETS.numbers + '!@#$%^&*',
    ultra: CHAR_SETS.lowercase + CHAR_SETS.uppercase + CHAR_SETS.numbers + CHAR_SETS.symbols,
  };
  
  function generatePassword(length, level, excludeSimilar) {
    let charset = PASSWORD_SETS[level];
    
    if (excludeSimilar) {
      charset = charset.split('').filter(c => !SIMILAR_CHARS.includes(c)).join('');
    }
    
    // Ensure password contains at least one character from each required set
    let password = '';
    
    if (level === 'simple' || level === 'strong' || level === 'ultra') {
      password += CHAR_SETS.lowercase[randomInt(CHAR_SETS.lowercase.length)];
      password += CHAR_SETS.uppercase[randomInt(CHAR_SETS.uppercase.length)];
      password += CHAR_SETS.numbers[randomInt(CHAR_SETS.numbers.length)];
    }
    
    if (level === 'strong' || level === 'ultra') {
      password += '!@#$%^&*'[randomInt(8)];
    }
    
    // Fill the rest
    for (let i = password.length; i < length; i++) {
      password += charset[randomInt(charset.length)];
    }
    
    // Shuffle
    const arr = password.split('');
    for (let i = arr.length - 1; i > 0; i--) {
      const j = randomInt(i + 1);
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    
    return arr.join('');
  }
  
  function calculatePasswordStrength(password) {
    const length = password.length;
    let charsetSize = 0;
    
    if (/[a-z]/.test(password)) charsetSize += 26;
    if (/[A-Z]/.test(password)) charsetSize += 26;
    if (/[0-9]/.test(password)) charsetSize += 10;
    if (/[^a-zA-Z0-9]/.test(password)) charsetSize += 32;
    
    const entropy = length * Math.log2(charsetSize);
    const combinations = Math.pow(charsetSize, length);
    
    let strength = 'weak';
    let strengthClass = 'bg-error';
    let strengthWidth = 25;
    
    if (entropy > 100) {
      strength = 'veryStrong';
      strengthClass = 'bg-success';
      strengthWidth = 100;
    } else if (entropy > 60) {
      strength = 'strong';
      strengthClass = 'bg-success';
      strengthWidth = 75;
    } else if (entropy > 30) {
      strength = 'medium';
      strengthClass = 'bg-warning';
      strengthWidth = 50;
    }
    
    return {
      entropy: entropy.toFixed(1),
      combinations: combinations.toExponential(2),
      strength: i18n[strength],
      strengthClass,
      strengthWidth
    };
  }
  
  // ========== GENERATION ==========
  
  function generate(type, count) {
    const startTime = performance.now();
    const results = [];
    
    for (let i = 0; i < count; i++) {
      let value;
      
      switch (type) {
        case 'uuid':
          value = formatUUID(generateUUID(), settings.uuid.format);
          break;
        case 'nanoid':
          const alphabet = settings.nanoid.alphabet === 'custom' 
            ? document.getElementById('nanoid-alphabet').value || NANOID_ALPHABETS.default
            : NANOID_ALPHABETS[settings.nanoid.alphabet];
          value = generateNanoid(settings.nanoid.length, alphabet);
          break;
        case 'random':
          value = generateRandomString(settings.random.length, settings.random);
          break;
        case 'password':
          value = generatePassword(settings.password.length, settings.password.level, settings.password.excludeSimilar);
          break;
      }
      
      results.push(value);
    }
    
    const endTime = performance.now();
    const time = (endTime - startTime).toFixed(2);
    
    currentResults = results;
    displayResults(results, time);
  }
  
  // ========== DISPLAY ==========
  
  function displayResults(results, time) {
    const count = results.length;
    resultsCount.textContent = count;
    
    if (count === 1) {
      singleResult.classList.remove('hidden');
      bulkResults.classList.add('hidden');
      singleValue.textContent = results[0];
      
      // Show password strength
      if (currentTab === 'password') {
        const strength = calculatePasswordStrength(results[0]);
        passwordStrength.classList.remove('hidden');
        document.getElementById('strength-label').textContent = strength.strength;
        document.getElementById('strength-bar').className = `h-2 rounded-full transition-all ${strength.strengthClass}`;
        document.getElementById('strength-bar').style.width = strength.strengthWidth + '%';
        document.getElementById('entropy-value').textContent = strength.entropy;
        document.getElementById('combinations-value').textContent = strength.combinations;
      } else {
        passwordStrength.classList.add('hidden');
      }
    } else {
      singleResult.classList.add('hidden');
      bulkResults.classList.remove('hidden');
      bulkOutput.value = results.join('\n');
    }
    
    // Stats
    const avgLength = results.reduce((sum, r) => sum + r.length, 0) / count;
    const unique = new Set(results).size;
    
    document.getElementById('stat-total').textContent = count;
    document.getElementById('stat-length').textContent = avgLength.toFixed(1);
    document.getElementById('stat-unique').textContent = unique;
    document.getElementById('stat-time').textContent = time + 'ms';
    
    statsPanel.classList.remove('hidden');
    
    // Enable buttons
    document.getElementById('copy-all').disabled = false;
  }
  
  // ========== TABS ==========
  
  function switchTab(tab) {
    currentTab = tab;
    
    tabs.forEach(t => {
      t.classList.toggle('tab-active', t.dataset.tab === tab);
    });
    
    ['uuid', 'nanoid', 'random', 'password'].forEach(type => {
      document.getElementById('settings-' + type).classList.toggle('hidden', type !== tab);
    });
    
    // Reset results
    currentResults = [];
    singleResult.classList.remove('hidden');
    bulkResults.classList.add('hidden');
    singleValue.textContent = '‚Äî';
    resultsCount.textContent = '0';
    statsPanel.classList.add('hidden');
    passwordStrength.classList.add('hidden');
    document.getElementById('copy-all').disabled = true;
  }
  
  // ========== COPY ==========
  
  async function copyToClipboard(text, message) {
    try {
      await navigator.clipboard.writeText(text);
      showToast(message || i18n.copied);
    } catch (e) {
      console.error('Failed to copy:', e);
    }
  }
  
  function showToast(message) {
    toastMessage.textContent = message;
    toast.classList.remove('hidden');
    setTimeout(() => {
      toast.classList.add('hidden');
    }, 2000);
  }
  
  // ========== DOWNLOAD ==========
  
  function downloadFile(content, filename, type) {
    const blob = new Blob([content], { type });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    a.click();
    URL.revokeObjectURL(url);
  }
  
  function downloadTxt() {
    if (!currentResults.length) return;
    downloadFile(currentResults.join('\n'), `${currentTab}-${Date.now()}.txt`, 'text/plain');
  }
  
  function downloadJson() {
    if (!currentResults.length) return;
    const json = JSON.stringify(currentResults, null, 2);
    downloadFile(json, `${currentTab}-${Date.now()}.json`, 'application/json');
  }
  
  function downloadCsv() {
    if (!currentResults.length) return;
    const csv = 'value\n' + currentResults.join('\n');
    downloadFile(csv, `${currentTab}-${Date.now()}.csv`, 'text/csv');
  }
  
  // ========== SETTINGS PERSISTENCE ==========
  
  function saveSettings() {
    localStorage.setItem('uuid-generator-settings', JSON.stringify(settings));
  }
  
  function loadSettings() {
    const saved = localStorage.getItem('uuid-generator-settings');
    if (saved) {
      try {
        settings = { ...settings, ...JSON.parse(saved) };
        applySettings();
      } catch (e) {
        console.error('Failed to load settings:', e);
      }
    }
  }
  
  function applySettings() {
    // UUID
    document.getElementById('uuid-format').value = settings.uuid.format;
    document.getElementById('uuid-count').value = settings.uuid.count;
    
    // nanoid
    document.getElementById('nanoid-length').value = settings.nanoid.length;
    document.getElementById('nanoid-preset').value = settings.nanoid.alphabet;
    document.getElementById('nanoid-count').value = settings.nanoid.count;
    
    // Random
    document.getElementById('random-length').value = settings.random.length;
    document.getElementById('random-lowercase').checked = settings.random.lowercase;
    document.getElementById('random-uppercase').checked = settings.random.uppercase;
    document.getElementById('random-numbers').checked = settings.random.numbers;
    document.getElementById('random-symbols').checked = settings.random.symbols;
    document.getElementById('random-exclude-similar').checked = settings.random.excludeSimilar;
    document.getElementById('random-count').value = settings.random.count;
    
    // Password
    document.getElementById('password-length').value = settings.password.length;
    document.getElementById('password-length-value').textContent = settings.password.length;
    document.querySelector(`input[name="password-level"][value="${settings.password.level}"]`).checked = true;
    document.getElementById('password-exclude-similar').checked = settings.password.excludeSimilar;
    document.getElementById('password-count').value = settings.password.count;
  }
  
  // ========== EVENT LISTENERS ==========
  
  // Tabs
  tabs.forEach(tab => {
    tab.addEventListener('click', () => switchTab(tab.dataset.tab));
  });
  
  // UUID
  document.getElementById('uuid-format').addEventListener('change', (e) => {
    settings.uuid.format = e.target.value;
    saveSettings();
  });
  
  document.getElementById('uuid-count').addEventListener('change', (e) => {
    settings.uuid.count = parseInt(e.target.value);
    saveSettings();
  });
  
  document.getElementById('uuid-generate').addEventListener('click', () => {
    generate('uuid', settings.uuid.count);
  });
  
  // nanoid
  document.getElementById('nanoid-length').addEventListener('change', (e) => {
    settings.nanoid.length = parseInt(e.target.value);
    saveSettings();
  });
  
  document.getElementById('nanoid-preset').addEventListener('change', (e) => {
    settings.nanoid.alphabet = e.target.value;
    document.getElementById('nanoid-alphabet').classList.toggle('hidden', e.target.value !== 'custom');
    saveSettings();
  });
  
  document.getElementById('nanoid-count').addEventListener('change', (e) => {
    settings.nanoid.count = parseInt(e.target.value);
    saveSettings();
  });
  
  document.getElementById('nanoid-generate').addEventListener('click', () => {
    generate('nanoid', settings.nanoid.count);
  });
  
  // Random
  document.getElementById('random-length').addEventListener('change', (e) => {
    settings.random.length = parseInt(e.target.value);
    saveSettings();
  });
  
  ['lowercase', 'uppercase', 'numbers', 'symbols', 'exclude-similar'].forEach(opt => {
    const key = opt.replace(/-([a-z])/g, (g) => g[1].toUpperCase());
    document.getElementById('random-' + opt).addEventListener('change', (e) => {
      settings.random[key] = e.target.checked;
      saveSettings();
    });
  });
  
  document.getElementById('random-count').addEventListener('change', (e) => {
    settings.random.count = parseInt(e.target.value);
    saveSettings();
  });
  
  document.getElementById('random-generate').addEventListener('click', () => {
    generate('random', settings.random.count);
  });
  
  // Password
  document.getElementById('password-length').addEventListener('input', (e) => {
    settings.password.length = parseInt(e.target.value);
    document.getElementById('password-length-value').textContent = e.target.value;
    saveSettings();
  });
  
  document.querySelectorAll('input[name="password-level"]').forEach(radio => {
    radio.addEventListener('change', (e) => {
      settings.password.level = e.target.value;
      saveSettings();
    });
  });
  
  document.getElementById('password-exclude-similar').addEventListener('change', (e) => {
    settings.password.excludeSimilar = e.target.checked;
    saveSettings();
  });
  
  document.getElementById('password-count').addEventListener('change', (e) => {
    settings.password.count = parseInt(e.target.value);
    saveSettings();
  });
  
  document.getElementById('password-generate').addEventListener('click', () => {
    generate('password', settings.password.count);
  });
  
  // Copy
  document.getElementById('copy-single').addEventListener('click', () => {
    if (currentResults.length === 1) {
      copyToClipboard(currentResults[0]);
    }
  });
  
  document.getElementById('copy-all').addEventListener('click', () => {
    if (currentResults.length > 0) {
      const text = currentResults.join('\n');
      const message = i18n.copiedCount.replace('{count}', currentResults.length);
      copyToClipboard(text, message);
    }
  });
  
  // Download
  document.getElementById('download-txt').addEventListener('click', downloadTxt);
  document.getElementById('download-json').addEventListener('click', downloadJson);
  document.getElementById('download-csv').addEventListener('click', downloadCsv);
  
  // Keyboard shortcuts
  document.addEventListener('keydown', (e) => {
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
      const btn = document.getElementById(`${currentTab}-generate`);
      if (btn) btn.click();
    }
  });
  
  // ========== INIT ==========
  loadSettings();
  
  // Auto-generate on first load
  generate('uuid', 1);
  
  console.log('UUID Generator ready');
  
})();
</script>

{{ end }}